{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/errors.ts"],"sourcesContent":["import type { ApiErrorContext } from './types';\n\nexport class ApiError extends Error {\n  public readonly status: number;\n  public readonly code: string;\n  public readonly context?: ApiErrorContext;\n  public readonly timestamp: string;\n\n  constructor(\n    message: string,\n    status: number = 500,\n    code: string = 'API_ERROR',\n    context?: ApiErrorContext\n  ) {\n    super(message);\n    this.name = 'ApiError';\n    this.status = status;\n    this.code = code;\n    this.context = context;\n    this.timestamp = new Date().toISOString();\n\n    // Maintain proper stack trace\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, ApiError);\n    }\n  }\n\n  getDebugInfo(): string {\n    if (!this.context) return this.message;\n\n    return `\nAPI Error Debug Info:\n- Message: ${this.message}\n- Status: ${this.status}\n- Code: ${this.code}\n- Timestamp: ${this.timestamp}\n- URL: ${this.context.url}\n- Method: ${this.context.method}\n- Request Body: ${JSON.stringify(this.context.requestBody, null, 2)}\n- Response Body: ${JSON.stringify(this.context.responseBody, null, 2)}\n- Correlation ID: ${this.context.correlationId || 'N/A'}\n    `.trim();\n  }\n\n  toLogData(): ErrorLogData {\n    return {\n        message: this.message,\n        status: this.status,\n        code: this.code,\n        timestamp: this.timestamp,\n        stack: this.stack,\n        context: this.context,\n    };\n  }\n}\n\ninterface ErrorLogData {\n    message: string;\n    status: number;\n    code: string;\n    timestamp: string;\n    stack?: string;\n    context?: ApiErrorContext;\n}\n\nexport class BadRequestError extends ApiError {\n  constructor(message: string = 'Bad request', context?: ApiErrorContext) {\n    super(message, 400, 'BAD_REQUEST', context);\n    this.name = 'BadRequestError';\n  }\n}\n\nexport class UnauthorizedError extends ApiError {\n  constructor(message: string = 'Authentication required', context?: ApiErrorContext) {\n    super(message, 401, 'UNAUTHORIZED', context);\n    this.name = 'UnauthorizedError';\n  }\n}\n\nexport class ForbiddenError extends ApiError {\n  constructor(message: string = 'Forbidden', context?: ApiErrorContext) {\n    super(message, 403, 'FORBIDDEN', context);\n    this.name = 'ForbiddenError';\n  }\n}\n\nexport class NotFoundError extends ApiError {\n  constructor(message: string = 'Resource not found', context?: ApiErrorContext) {\n    super(message, 404, 'NOT_FOUND', context);\n    this.name = 'NotFoundError';\n  }\n}\n\nexport class ValidationError extends ApiError {\n  public readonly field?: string;\n\n  constructor(\n    message: string = 'Validation failed', \n    field?: string, \n    context?: ApiErrorContext\n  ) {\n    super(message, 422, 'VALIDATION_ERROR', context);\n    this.name = 'ValidationError';\n    this.field = field;\n  }\n}\n\nexport class NetworkError extends ApiError {\n  constructor(message: string = 'Network error', context?: ApiErrorContext) {\n    super(message, 0, 'NETWORK_ERROR', context);\n    this.name = 'NetworkError';\n  }\n}\n\nexport class TimeoutError extends ApiError {\n  constructor(message: string = 'Request timeout', context?: ApiErrorContext) {\n    super(message, 408, 'TIMEOUT_ERROR', context);\n    this.name = 'TimeoutError';\n  }\n}\n\nexport class ServerError extends ApiError {\n  constructor(message: string = 'Internal server error', status: number = 500, context?: ApiErrorContext) {\n    super(message, status, 'SERVER_ERROR', context);\n    this.name = 'ServerError';\n  }\n}\n\nexport function createApiError(\n  message: string,\n  status: number,\n  context?: ApiErrorContext\n): ApiError {\n  switch (status) {\n    case 400:\n      return new BadRequestError(message, context);\n    case 401:\n      return new UnauthorizedError(message, context);\n    case 403:\n      return new ForbiddenError(message, context);\n    case 404:\n      return new NotFoundError(message, context);\n    case 408:\n      return new TimeoutError(message, context);\n    case 422:\n      return new ValidationError(message, undefined, context);\n    default:\n      if (status >= 500) {\n        return new ServerError(message, status, context);\n      }\n      return new ApiError(message, status, 'API_ERROR', context);\n  }\n}\n\nexport function logApiError(error: ApiError): void {\n  if (process.env.NODE_ENV === 'development') {\n    console.group(`ðŸš¨ API Error: ${error.code}`);\n    console.error(error.getDebugInfo());\n    console.groupEnd();\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 147, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/core/parser.ts"],"sourcesContent":["import type { \n  ApiSuccessResponse, \n  ApiErrorResponse,\n  ApiErrorContext\n} from '../types';\nimport { createApiError, ApiError, logApiError } from '../errors';\n\n// Requests tracking\nfunction generateCorrelationId(): string {\n  return `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\n}\n\nexport async function parseApiResponse<TResponse>(\n  response: Response,\n  context: ApiErrorContext\n): Promise<TResponse> {\n  let responseBody: unknown;\n    \n  const enhancedContext: ApiErrorContext = {\n    ...context,\n    timestamp: new Date().toISOString(),\n    userAgent: navigator.userAgent,\n    correlationId: context.correlationId || generateCorrelationId(),\n    status: response.status,\n  };\n\n  try {\n    const text = await response.text();\n    responseBody = text ? JSON.parse(text) : {};\n    \n    // Type-safe assignment to context\n    if (typeof responseBody === 'string') {\n      context.responseBody = responseBody;\n    } else if (isApiSuccessResponse(responseBody) || isApiErrorResponse(responseBody)) {\n      context.responseBody = responseBody;\n    } else {\n      context.responseBody = String(responseBody);\n    }\n  } catch {\n    const error = new ApiError(\n      'Invalid JSON response from server',\n      response.status,\n      'PARSE_ERROR',\n      { ...context, status: response.status }\n    );\n\n    logApiError(error);\n    throw error;\n  }\n\n  if (!response.ok) {\n    const errorMessage = isApiErrorResponse(responseBody) \n      ? responseBody.error \n      : `HTTP ${response.status}: ${response.statusText}`;\n    \n    const errorResponseBody = isApiErrorResponse(responseBody) ? responseBody : undefined;\n    enhancedContext.responseBody = errorResponseBody;\n\n    const error = createApiError(errorMessage, response.status, enhancedContext);\n    logApiError(error);\n    throw error;\n  }\n\n  if (isApiSuccessResponse(responseBody)) {\n    return responseBody.data as TResponse;\n  }\n\n  return responseBody as TResponse;\n}\n\nfunction isApiErrorResponse(obj: unknown): obj is ApiErrorResponse {\n  return typeof obj === 'object' && \n         obj !== null && \n         'error' in obj && \n         typeof (obj as Record<string, unknown>).error === 'string';\n}\n\nfunction isApiSuccessResponse<T = unknown>(obj: unknown): obj is ApiSuccessResponse<T> {\n  return typeof obj === 'object' && \n         obj !== null && \n         'data' in obj;\n}"],"names":[],"mappings":";;;AAKA;;AAEA,oBAAoB;AACpB,SAAS;IACP,OAAO,CAAC,IAAI,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG,IAAI;AACvE;AAEO,eAAe,iBACpB,QAAkB,EAClB,OAAwB;IAExB,IAAI;IAEJ,MAAM,kBAAmC;QACvC,GAAG,OAAO;QACV,WAAW,IAAI,OAAO,WAAW;QACjC,WAAW,UAAU,SAAS;QAC9B,eAAe,QAAQ,aAAa,IAAI;QACxC,QAAQ,SAAS,MAAM;IACzB;IAEA,IAAI;QACF,MAAM,OAAO,MAAM,SAAS,IAAI;QAChC,eAAe,OAAO,KAAK,KAAK,CAAC,QAAQ,CAAC;QAE1C,kCAAkC;QAClC,IAAI,OAAO,iBAAiB,UAAU;YACpC,QAAQ,YAAY,GAAG;QACzB,OAAO,IAAI,qBAAqB,iBAAiB,mBAAmB,eAAe;YACjF,QAAQ,YAAY,GAAG;QACzB,OAAO;YACL,QAAQ,YAAY,GAAG,OAAO;QAChC;IACF,EAAE,OAAM;QACN,MAAM,QAAQ,IAAI,0IAAA,CAAA,WAAQ,CACxB,qCACA,SAAS,MAAM,EACf,eACA;YAAE,GAAG,OAAO;YAAE,QAAQ,SAAS,MAAM;QAAC;QAGxC,CAAA,GAAA,0IAAA,CAAA,cAAW,AAAD,EAAE;QACZ,MAAM;IACR;IAEA,IAAI,CAAC,SAAS,EAAE,EAAE;QAChB,MAAM,eAAe,mBAAmB,gBACpC,aAAa,KAAK,GAClB,CAAC,KAAK,EAAE,SAAS,MAAM,CAAC,EAAE,EAAE,SAAS,UAAU,EAAE;QAErD,MAAM,oBAAoB,mBAAmB,gBAAgB,eAAe;QAC5E,gBAAgB,YAAY,GAAG;QAE/B,MAAM,QAAQ,CAAA,GAAA,0IAAA,CAAA,iBAAc,AAAD,EAAE,cAAc,SAAS,MAAM,EAAE;QAC5D,CAAA,GAAA,0IAAA,CAAA,cAAW,AAAD,EAAE;QACZ,MAAM;IACR;IAEA,IAAI,qBAAqB,eAAe;QACtC,OAAO,aAAa,IAAI;IAC1B;IAEA,OAAO;AACT;AAEA,SAAS,mBAAmB,GAAY;IACtC,OAAO,OAAO,QAAQ,YACf,QAAQ,QACR,WAAW,OACX,OAAO,AAAC,IAAgC,KAAK,KAAK;AAC3D;AAEA,SAAS,qBAAkC,GAAY;IACrD,OAAO,OAAO,QAAQ,YACf,QAAQ,QACR,UAAU;AACnB","debugId":null}},
    {"offset": {"line": 209, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/core/http.ts"],"sourcesContent":["import { getApiUrl } from '@/lib/config';\nimport type { \n  ApiRequestConfig, \n  ApiClientResponse,\n  ApiErrorContext,\n} from '../types';\nimport { \n  NetworkError, \n  TimeoutError,\n  ApiError \n} from '../errors';\nimport { parseApiResponse } from './parser';\n\n// Base API configuration\nconst API_BASE_URL = getApiUrl();\nconst DEFAULT_TIMEOUT = 30000; // 30 seconds\n\nexport async function makeApiRequest<TResponse = unknown>(\n  endpoint: string,\n  config: ApiRequestConfig = {}\n): Promise<ApiClientResponse<TResponse>> {\n  const {\n    method = 'GET',\n    body,\n    params,\n    timeout = DEFAULT_TIMEOUT,\n    headers: customHeaders = {},\n    ...restConfig\n  } = config;\n\n  // Build URL with query parameters\n  const url = new URL(`${API_BASE_URL}${endpoint}`);\n  if (params) {\n    Object.entries(params).forEach(([key, value]) => {\n      url.searchParams.append(key, String(value));\n    });\n  }\n\n  // Prepare headers\n  const headers: HeadersInit = {\n    'Content-Type': 'application/json',\n    ...customHeaders,\n  };\n\n  // Prepare request body\n  let requestBody: BodyInit | undefined;\n  if (body && method !== 'GET') {\n    if (body instanceof FormData || body instanceof URLSearchParams) {\n      requestBody = body;\n      // Remove Content-Type for FormData to let browser set boundary\n      if (body instanceof FormData) {\n        delete (headers as Record<string, string>)['Content-Type'];\n      }\n    } else if (typeof body === 'string') {\n      requestBody = body;\n    } else if (typeof body === 'object' && body !== null) {\n      requestBody = JSON.stringify(body);\n    }\n  }\n\n  // Create error context for debugging\n  const errorContext: ApiErrorContext = {\n    url: url.toString(),\n    method,\n    requestBody: body,\n    timestamp: new Date().toISOString(),\n    correlationId: `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n  };\n\n  // Create abort controller for timeout\n  const controller = new AbortController();\n  const timeoutId = setTimeout(() => controller.abort(), timeout);\n\n  try {\n    const response = await fetch(url.toString(), {\n      method,\n      headers,\n      body: requestBody,\n      credentials: 'include', // Include cookies for better-auth\n      signal: controller.signal,\n      ...restConfig,\n    });\n\n    clearTimeout(timeoutId);\n\n    // Parse response\n    const responseData = await parseApiResponse<TResponse>(response, errorContext);\n    \n    return {\n      data: responseData,\n      status: response.status,\n      statusText: response.statusText,\n      headers: response.headers,\n    };\n\n  } catch (error) {\n    clearTimeout(timeoutId);\n    \n    // Handle different error types\n    if (error instanceof ApiError) {\n      throw error;\n    }\n    \n    if (error instanceof DOMException && error.name === 'AbortError') {\n      throw new TimeoutError(`Request timeout after ${timeout}ms`, errorContext);\n    }\n    \n    if (error instanceof TypeError && error.message.includes('fetch')) {\n      throw new NetworkError('Network connection failed', errorContext);\n    }\n\n    // Unknown error\n    throw new ApiError(\n      error instanceof Error ? error.message : 'An unexpected error occurred',\n      500,\n      'UNKNOWN_ERROR',\n      errorContext\n    );\n  }\n}\n\nexport async function makeAuthenticatedRequest<TResponse = unknown>(\n  endpoint: string,\n  config: ApiRequestConfig = {}\n): Promise<ApiClientResponse<TResponse>> {\n  try {\n    return await makeApiRequest<TResponse>(endpoint, config);\n  } catch (error) {\n    if (error instanceof ApiError && error.status === 401) {\n      // Handle authentication errors - could trigger logout logic here\n      console.warn('Authentication failed - user may need to log in again');\n    }\n    throw error;\n  }\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 313, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/core/index.ts"],"sourcesContent":["export { makeApiRequest, makeAuthenticatedRequest } from './http';\nexport { parseApiResponse } from './parser';"],"names":[],"mappings":";AAAA;AACA","debugId":null}},
    {"offset": {"line": 334, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/base.ts"],"sourcesContent":["import { makeAuthenticatedRequest } from './core';\nimport type { ApiRequestConfig, RequestBody } from './types';\n\nexport async function get<TResponse = unknown>(\n  endpoint: string,\n  params?: Record<string, string | number>,\n  config?: Omit<ApiRequestConfig, 'method' | 'params'>\n): Promise<TResponse> {\n  const response = await makeAuthenticatedRequest<TResponse>(endpoint, {\n    method: 'GET',\n    params,\n    ...config,\n  });\n  return response.data;\n}\n\nexport async function post<TResponse = unknown, TBody = RequestBody>(\n  endpoint: string,\n  body?: TBody,\n  config?: Omit<ApiRequestConfig, 'method' | 'body'>\n): Promise<TResponse> {\n  const response = await makeAuthenticatedRequest<TResponse>(endpoint, {\n    method: 'POST',\n    body: body as RequestBody,\n    ...config,\n  });\n  return response.data;\n}\n\nexport async function put<TResponse = unknown, TBody = RequestBody>(\n  endpoint: string,\n  body?: TBody,\n  config?: Omit<ApiRequestConfig, 'method' | 'body'>\n): Promise<TResponse> {\n  const response = await makeAuthenticatedRequest<TResponse>(endpoint, {\n    method: 'PUT',\n    body: body as RequestBody,\n    ...config,\n  });\n  return response.data;\n}\n\nexport async function del<TResponse = unknown>(\n  endpoint: string,\n  config?: Omit<ApiRequestConfig, 'method'>\n): Promise<TResponse> {\n  const response = await makeAuthenticatedRequest<TResponse>(endpoint, {\n    method: 'DELETE',\n    ...config,\n  });\n  return response.data;\n}\n\nexport async function patch<TResponse = unknown, TBody = RequestBody>(\n  endpoint: string,\n  body?: TBody,\n  config?: Omit<ApiRequestConfig, 'method' | 'body'>\n): Promise<TResponse> {\n  const response = await makeAuthenticatedRequest<TResponse>(endpoint, {\n    method: 'PATCH',\n    body: body as RequestBody,\n    ...config,\n  });\n  return response.data;\n}\n\nexport { makeApiRequest, makeAuthenticatedRequest } from './core';"],"names":[],"mappings":";;;;;;;AAAA;AAAA;;AAGO,eAAe,IACpB,QAAgB,EAChB,MAAwC,EACxC,MAAoD;IAEpD,MAAM,WAAW,MAAM,CAAA,GAAA,gJAAA,CAAA,2BAAwB,AAAD,EAAa,UAAU;QACnE,QAAQ;QACR;QACA,GAAG,MAAM;IACX;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,KACpB,QAAgB,EAChB,IAAY,EACZ,MAAkD;IAElD,MAAM,WAAW,MAAM,CAAA,GAAA,gJAAA,CAAA,2BAAwB,AAAD,EAAa,UAAU;QACnE,QAAQ;QACR,MAAM;QACN,GAAG,MAAM;IACX;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,IACpB,QAAgB,EAChB,IAAY,EACZ,MAAkD;IAElD,MAAM,WAAW,MAAM,CAAA,GAAA,gJAAA,CAAA,2BAAwB,AAAD,EAAa,UAAU;QACnE,QAAQ;QACR,MAAM;QACN,GAAG,MAAM;IACX;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,IACpB,QAAgB,EAChB,MAAyC;IAEzC,MAAM,WAAW,MAAM,CAAA,GAAA,gJAAA,CAAA,2BAAwB,AAAD,EAAa,UAAU;QACnE,QAAQ;QACR,GAAG,MAAM;IACX;IACA,OAAO,SAAS,IAAI;AACtB;AAEO,eAAe,MACpB,QAAgB,EAChB,IAAY,EACZ,MAAkD;IAElD,MAAM,WAAW,MAAM,CAAA,GAAA,gJAAA,CAAA,2BAAwB,AAAD,EAAa,UAAU;QACnE,QAAQ;QACR,MAAM;QACN,GAAG,MAAM;IACX;IACA,OAAO,SAAS,IAAI;AACtB","debugId":null}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/pets.ts"],"sourcesContent":["import { get, post, put, del } from './base';  // Use base functions directly\nimport { ValidationError } from './errors';\nimport type { Pet, PetFormData, PetsApiResponse, PetError } from '@/types/pet';\n\nexport const petApi = {\n\n  async getPets(): Promise<PetsApiResponse> {\n    try {\n      return await get<PetsApiResponse>('/api/pets');\n    } catch (error) {\n      console.error('Error fetching pets:', error);\n      throw error;\n    }\n  },\n\n  async getPetById(petId: string): Promise<Pet> {\n    try {\n      const result = await get<{ pet: Pet }>(`/api/pets/${petId}`);\n      return result.pet;\n    } catch (error) {\n      console.error('Error fetching pet:', error);\n      throw error;\n    }\n  },\n\n  async createPet(petData: PetFormData): Promise<Pet> {\n    try {\n      const result = await post<{ pet: Pet }, PetFormData>('/api/pets', petData);\n      return result.pet;\n    } catch (error) {\n      console.error('Error creating pet:', error);\n      throw error;\n    }\n  },\n\n  async updatePet(petId: string, petData: Partial<PetFormData>): Promise<Pet> {\n    try {\n      const result = await put<{ pet: Pet }, Partial<PetFormData>>(`/api/pets/${petId}`, petData);\n      return result.pet;\n    } catch (error) {\n      console.error('Error updating pet:', error);\n      throw error;\n    }\n  },\n\n  async deletePet(petId: string): Promise<void> {\n    try {\n      await del<{ message: string }>(`/api/pets/${petId}`);\n    } catch (error) {\n      console.error('Error deleting pet:', error);\n      throw error;\n    }\n  },\n\n  async permanentlyDeletePet(petId: string): Promise<void> {\n    try {\n      await del<{ message: string }>(`/api/pets/${petId}/permanent`);\n    } catch (error) {\n      console.error('Error permanently deleting pet:', error);\n      throw error;\n    }\n  },\n\n  async getPetCount(): Promise<number> {\n    try {\n      const result = await get<{ count: number }>('/api/pets/stats/count');\n      return result.count;\n    } catch (error) {\n      console.error('Error fetching pet count:', error);\n      throw error;\n    }\n  },\n};\n\nexport const petErrorHandler = (error: unknown): PetError => {\n  let message: string;\n  let field: keyof PetFormData | undefined;\n  let code: string;\n\n  // Handle API error types\n  if (error instanceof ValidationError) {\n    message = error.message;\n    field = error.field as keyof PetFormData;\n    code = error.code;\n  } else if (error instanceof Error) {\n    message = error.message;\n    code = 'PET_ERROR';\n  } else if (typeof error === 'string') {\n    message = error;\n    code = 'PET_ERROR';\n  } else {\n    message = 'An error occurred while processing your request';\n    code = 'PET_ERROR';\n  }\n\n  // Map specific validation errors to fields\n  if (message.includes('name')) {\n    field = 'name';\n    code = 'INVALID_NAME';\n  } else if (message.includes('species') || message.includes('breed')) {\n    field = 'species';\n    code = 'INVALID_SPECIES';\n  } else if (message.includes('weight')) {\n    field = 'weight';\n    code = 'INVALID_WEIGHT';\n  } else if (message.includes('birth') || message.includes('date')) {\n    field = 'birthDate';\n    code = 'INVALID_DATE';\n  } else if (message.includes('microchip')) {\n    field = 'microchipNumber';\n    code = 'INVALID_MICROCHIP';\n  } else if (message.includes('not found')) {\n    code = 'PET_NOT_FOUND';\n  } else if (message.includes('unauthorized') || message.includes('forbidden')) {\n    code = 'UNAUTHORIZED';\n  }\n\n  return {\n    message,\n    field,\n    code,\n  };\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/validations/pet.ts"],"sourcesContent":["import { z } from 'zod';\nimport type { WeightUnit } from '@/types/pet';\n\n// Pet gender and weight unit enums for validation\nexport const petGenderSchema = z.enum(['male', 'female', 'unknown'], {\n  errorMap: () => ({ message: 'Please select a valid gender' })\n});\n\nexport const weightUnitSchema = z.enum(['kg', 'lbs'], {\n  errorMap: () => ({ message: 'Please select a valid weight unit' })\n});\n\n// Base pet validation schema (no refine so we can use .extend, .shape, .partial)\nexport const basePetFormSchema = z.object({\n  name: z\n    .string()\n    .min(1, 'Pet name is required')\n    .max(50, 'Pet name must be less than 50 characters')\n    .regex(/^[a-zA-Z\\s\\-'\\.]+$/, 'Pet name can only contain letters, spaces, hyphens, apostrophes, and periods'),\n  \n  animalType: z.enum(['cat', 'dog'], {\n  errorMap: () => ({ message: 'Please select if this is a cat or dog' })\n  }),\n\n  species: z\n    .string()\n    .max(50, 'Species/breed must be less than 50 characters')\n    .regex(/^[a-zA-Z\\s\\-'\\.]*$/, 'Species/breed can only contain letters, spaces, hyphens, apostrophes, and periods')\n    .optional()\n    .or(z.literal('')),\n  \n  gender: petGenderSchema,\n  \n  birthDate: z\n    .string()\n    .refine((date) => {\n      if (!date) return true; // Optional field\n      const parsedDate = new Date(date);\n      const today = new Date();\n      const maxAge = new Date();\n      maxAge.setFullYear(today.getFullYear() - 30); // 30 years max age\n      \n      return parsedDate <= today && parsedDate >= maxAge;\n    }, 'Please enter a valid birth date (not in the future, not older than 30 years)')\n    .optional()\n    .or(z.literal('')),\n  \n  weight: z\n    .string()\n    .optional()\n    .or(z.literal('')),\n    \n  weightUnit: weightUnitSchema,\n  \n  isNeutered: z.boolean(),\n  \n  microchipNumber: z\n    .string()\n    .regex(/^[A-Za-z0-9]*$/, 'Microchip number can only contain letters and numbers')\n    .max(50, 'Microchip number must be less than 50 characters')\n    .optional()\n    .or(z.literal('')),\n  \n  notes: z\n    .string()\n    .max(1000, 'Notes must be less than 1000 characters')\n    .optional()\n    .or(z.literal('')),\n});\n\n// Enhanced validation with unit-specific weight limits (this will be a ZodEffects)\nexport const petFormSchema = basePetFormSchema.refine((data) => {\n  if (!data.weight) return true; // Optional field\n  \n  const weight = parseFloat(data.weight);\n  if (isNaN(weight) || weight <= 0) return false;\n  \n  // Unit-specific validation\n  if (data.weightUnit === 'kg') {\n    return weight <= 200; // Max 200kg (440 lbs)\n  } else if (data.weightUnit === 'lbs') {\n    return weight <= 440; // Max 440 lbs (200kg)\n  }\n  \n  return true;\n}, {\n  message: 'Weight exceeds maximum allowed (200kg / 440lbs)',\n  path: ['weight']\n});\n\n// Schema for creating a new pet (all required fields must be provided)\nexport const createPetSchema = basePetFormSchema.extend({\n  name: basePetFormSchema.shape.name, // name is already required\n}).refine((data) => {\n  if (!data.weight) return true; // Optional field\n  \n  const weight = parseFloat(data.weight);\n  if (isNaN(weight) || weight <= 0) return false;\n  \n  // Unit-specific validation\n  if (data.weightUnit === 'kg') {\n    return weight <= 200; // Max 200kg (440 lbs)\n  } else if (data.weightUnit === 'lbs') {\n    return weight <= 440; // Max 440 lbs (200kg)\n  }\n  \n  return true;\n}, {\n  message: 'Weight exceeds maximum allowed (200kg / 440lbs)',\n  path: ['weight']\n});\n\n// Schema for updating a pet (more flexible)\nexport const updatePetSchema = basePetFormSchema.partial().extend({\n  id: z.string().uuid('Invalid pet ID'),\n}).refine((data) => {\n  if (!data.weight) return true; // Optional field\n  \n  const weight = parseFloat(data.weight);\n  if (isNaN(weight) || weight <= 0) return false;\n  \n  // Unit-specific validation\n  if (data.weightUnit === 'kg') {\n    return weight <= 200; // Max 200kg (440 lbs)\n  } else if (data.weightUnit === 'lbs') {\n    return weight <= 440; // Max 440 lbs (200kg)\n  }\n  \n  return true;\n}, {\n  message: 'Weight exceeds maximum allowed (200kg / 440lbs)',\n  path: ['weight']\n});\n\n// Export types\nexport type PetFormData = z.infer<typeof petFormSchema>;\nexport type CreatePetData = z.infer<typeof createPetSchema>;\nexport type UpdatePetData = z.infer<typeof updatePetSchema>;\n\n// Utility functions for validation\nexport const validatePetForm = (data: unknown) => {\n  return petFormSchema.safeParse(data);\n};\n\nexport const validateCreatePet = (data: unknown) => {\n  return createPetSchema.safeParse(data);\n};\n\nexport const validateUpdatePet = (data: unknown) => {\n  return updatePetSchema.safeParse(data);\n};\n\n// Weight conversion utilities\nexport const convertWeight = (weight: number, fromUnit: WeightUnit, toUnit: WeightUnit): number => {\n  if (fromUnit === toUnit) return weight;\n  \n  if (fromUnit === 'kg' && toUnit === 'lbs') {\n    return weight * 2.20462;\n  } else if (fromUnit === 'lbs' && toUnit === 'kg') {\n    return weight / 2.20462;\n  }\n  \n  return weight;\n};\n\nexport const formatWeight = (weight: string | null, unit: WeightUnit): string => {\n  if (!weight) return 'Unknown';\n  return `${weight} ${unit}`;\n};\n\nexport const getWeightInKg = (weight: string | null, unit: WeightUnit): number | null => {\n  if (!weight) return null;\n  const weightNum = parseFloat(weight);\n  if (isNaN(weightNum)) return null;\n  \n  return unit === 'kg' ? weightNum : convertWeight(weightNum, 'lbs', 'kg');\n};\n\nexport const getWeightInLbs = (weight: string | null, unit: WeightUnit): number | null => {\n  if (!weight) return null;\n  const weightNum = parseFloat(weight);\n  if (isNaN(weightNum)) return null;\n  \n  return unit === 'lbs' ? weightNum : convertWeight(weightNum, 'kg', 'lbs');\n};\n\n// Age calculation utility\nexport const calculatePetAge = (birthDate: string | null): string => {\n  if (!birthDate) return 'Unknown';\n  \n  const birth = new Date(birthDate);\n  const today = new Date();\n  \n  const years = today.getFullYear() - birth.getFullYear();\n  const months = today.getMonth() - birth.getMonth();\n  \n  if (months < 0 || (months === 0 && today.getDate() < birth.getDate())) {\n    const adjustedYears = years - 1;\n    const adjustedMonths = months < 0 ? 12 + months : months;\n    \n    if (adjustedYears === 0) {\n      return `${adjustedMonths} month${adjustedMonths !== 1 ? 's' : ''}`;\n    }\n    return `${adjustedYears} year${adjustedYears !== 1 ? 's' : ''}, ${adjustedMonths} month${adjustedMonths !== 1 ? 's' : ''}`;\n  }\n  \n  if (years === 0) {\n    return `${months} month${months !== 1 ? 's' : ''}`;\n  }\n  \n  return years === 1 ? '1 year' : `${years} years`;\n};\n\n// Common species suggestions for autocomplete (optional helper)\nexport const commonSpeciesSuggestions = {\n  cat: [\n    'Mixed Breed',\n    'Persian Cat',\n    'Maine Coon',\n    'British Shorthair',\n    'Ragdoll',\n    'Bengal Cat',\n    'Siamese Cat',\n    'Russian Blue',\n    'Scottish Fold',\n  ],\n  dog: [\n    'Mixed Breed',\n    'Labrador Retriever',\n    'Golden Retriever',\n    'German Shepherd',\n    'French Bulldog',\n    'Bulldog',\n    'Poodle',\n    'Beagle',\n    'Rottweiler',\n    'Yorkshire Terrier',\n  ]\n} as const;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 724, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/domains/weights/service.ts"],"sourcesContent":["import type { WeightRepository } from './repository';\nimport type { WeightValidator } from './validator';\nimport type { \n  WeightEntriesApiResponse,\n  WeightEntry,\n  WeightFormData,\n  WeightError\n} from '@/types/weights';\nimport type { WeightUnit } from '@/types/pet';\nimport {\n  ApiError,\n  NotFoundError,\n//   ValidationError,\n  UnauthorizedError,\n  ForbiddenError,\n} from '../../errors';\n\nexport class WeightService {\n  constructor(\n    private repository: WeightRepository,\n    private validator: WeightValidator\n  ) {}\n\n  async getWeightEntries(petId: string): Promise<WeightEntriesApiResponse> {\n    try {\n      return await this.repository.getWeightEntries(petId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async getWeightEntryById(petId: string, weightId: string): Promise<WeightEntry> {\n    try {\n      return await this.repository.getWeightEntryById(petId, weightId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async createWeightEntry(\n    petId: string, \n    weightData: WeightFormData, \n    weightUnit: WeightUnit\n  ): Promise<WeightEntry> {\n    try {\n      // Validate the data\n      this.validator.validateWeightEntry(weightData, weightUnit);\n      \n      return await this.repository.createWeightEntry(petId, weightData);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async updateWeightEntry(\n    petId: string,\n    weightId: string,\n    weightData: Partial<WeightFormData>,\n    weightUnit: WeightUnit\n  ): Promise<WeightEntry> {\n    try {\n      // Only validate if weight or date is being updated\n      if (weightData.weight || weightData.date) {\n        const fullData: WeightFormData = {\n          weight: weightData.weight || '0', // Will be validated anyway\n          date: weightData.date || new Date().toISOString().split('T')[0]\n        };\n        this.validator.validateWeightEntry(fullData, weightUnit);\n      }\n      \n      return await this.repository.updateWeightEntry(petId, weightId, weightData);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async deleteWeightEntry(petId: string, weightId: string): Promise<void> {\n    try {\n      await this.repository.deleteWeightEntry(petId, weightId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  // Error handling - follows the same pattern as PetService\n  private handleError(error: unknown): Error {\n    if (error instanceof ApiError) {\n      return error;\n    }\n    \n    if (error instanceof Error) {\n      return new ApiError(error.message, 500, 'WEIGHT_ERROR');\n    }\n    \n    return new ApiError('An unexpected error occurred', 500, 'WEIGHT_ERROR');\n  }\n\n  // Error mapping for UI consumption - follows petService pattern\n  mapError(error: unknown): WeightError {\n    let message = 'An error occurred while processing your request';\n    let field: keyof WeightFormData | undefined;\n    let code = 'WEIGHT_ERROR';\n\n    if (error instanceof UnauthorizedError) {\n      return {\n        message: 'You must be logged in to perform this action',\n        code: 'UNAUTHORIZED',\n      };\n    }\n    \n    if (error instanceof ForbiddenError) {\n      return {\n        message: 'You do not have permission to access this pet\\'s weight data',\n        code: 'FORBIDDEN',\n      };\n    }\n    \n    if (error instanceof NotFoundError) {\n      return {\n        message: 'Weight entry not found',\n        code: 'WEIGHT_NOT_FOUND',\n      };\n    }\n    \n    if (error instanceof ApiError) {\n      message = error.message;\n      code = error.code;\n    } else if (error instanceof Error) {\n      message = error.message;\n      code = 'WEIGHT_ERROR';\n    } else if (typeof error === 'string') {\n      message = error;\n      code = 'WEIGHT_ERROR';\n    }\n\n    // Map specific validation errors to fields\n    if (message.toLowerCase().includes('weight')) {\n      field = 'weight';\n      code = 'INVALID_WEIGHT';\n    } else if (message.toLowerCase().includes('date')) {\n      field = 'date';\n      code = 'INVALID_DATE';\n    } else if (message.toLowerCase().includes('future')) {\n      field = 'date';\n      code = 'FUTURE_DATE';\n    } else if (message.toLowerCase().includes('not found')) {\n      code = 'WEIGHT_NOT_FOUND';\n    } else if (message.toLowerCase().includes('unauthorized') || message.toLowerCase().includes('forbidden')) {\n      code = 'UNAUTHORIZED';\n    }\n\n    return {\n      message,\n      field,\n      code,\n    };\n  }\n}"],"names":[],"mappings":";;;AASA;;AAQO,MAAM;;;IACX,YACE,AAAQ,UAA4B,EACpC,AAAQ,SAA0B,CAClC;aAFQ,aAAA;aACA,YAAA;IACP;IAEH,MAAM,iBAAiB,KAAa,EAAqC;QACvE,IAAI;YACF,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC;QAChD,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,CAAC,WAAW,CAAC;QACzB;IACF;IAEA,MAAM,mBAAmB,KAAa,EAAE,QAAgB,EAAwB;QAC9E,IAAI;YACF,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,kBAAkB,CAAC,OAAO;QACzD,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,CAAC,WAAW,CAAC;QACzB;IACF;IAEA,MAAM,kBACJ,KAAa,EACb,UAA0B,EAC1B,UAAsB,EACA;QACtB,IAAI;YACF,oBAAoB;YACpB,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,YAAY;YAE/C,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,OAAO;QACxD,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,CAAC,WAAW,CAAC;QACzB;IACF;IAEA,MAAM,kBACJ,KAAa,EACb,QAAgB,EAChB,UAAmC,EACnC,UAAsB,EACA;QACtB,IAAI;YACF,mDAAmD;YACnD,IAAI,WAAW,MAAM,IAAI,WAAW,IAAI,EAAE;gBACxC,MAAM,WAA2B;oBAC/B,QAAQ,WAAW,MAAM,IAAI;oBAC7B,MAAM,WAAW,IAAI,IAAI,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;gBACjE;gBACA,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,UAAU;YAC/C;YAEA,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,OAAO,UAAU;QAClE,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,CAAC,WAAW,CAAC;QACzB;IACF;IAEA,MAAM,kBAAkB,KAAa,EAAE,QAAgB,EAAiB;QACtE,IAAI;YACF,MAAM,IAAI,CAAC,UAAU,CAAC,iBAAiB,CAAC,OAAO;QACjD,EAAE,OAAO,OAAO;YACd,MAAM,IAAI,CAAC,WAAW,CAAC;QACzB;IACF;IAEA,0DAA0D;IAClD,YAAY,KAAc,EAAS;QACzC,IAAI,iBAAiB,0IAAA,CAAA,WAAQ,EAAE;YAC7B,OAAO;QACT;QAEA,IAAI,iBAAiB,OAAO;YAC1B,OAAO,IAAI,0IAAA,CAAA,WAAQ,CAAC,MAAM,OAAO,EAAE,KAAK;QAC1C;QAEA,OAAO,IAAI,0IAAA,CAAA,WAAQ,CAAC,gCAAgC,KAAK;IAC3D;IAEA,gEAAgE;IAChE,SAAS,KAAc,EAAe;QACpC,IAAI,UAAU;QACd,IAAI;QACJ,IAAI,OAAO;QAEX,IAAI,iBAAiB,0IAAA,CAAA,oBAAiB,EAAE;YACtC,OAAO;gBACL,SAAS;gBACT,MAAM;YACR;QACF;QAEA,IAAI,iBAAiB,0IAAA,CAAA,iBAAc,EAAE;YACnC,OAAO;gBACL,SAAS;gBACT,MAAM;YACR;QACF;QAEA,IAAI,iBAAiB,0IAAA,CAAA,gBAAa,EAAE;YAClC,OAAO;gBACL,SAAS;gBACT,MAAM;YACR;QACF;QAEA,IAAI,iBAAiB,0IAAA,CAAA,WAAQ,EAAE;YAC7B,UAAU,MAAM,OAAO;YACvB,OAAO,MAAM,IAAI;QACnB,OAAO,IAAI,iBAAiB,OAAO;YACjC,UAAU,MAAM,OAAO;YACvB,OAAO;QACT,OAAO,IAAI,OAAO,UAAU,UAAU;YACpC,UAAU;YACV,OAAO;QACT;QAEA,2CAA2C;QAC3C,IAAI,QAAQ,WAAW,GAAG,QAAQ,CAAC,WAAW;YAC5C,QAAQ;YACR,OAAO;QACT,OAAO,IAAI,QAAQ,WAAW,GAAG,QAAQ,CAAC,SAAS;YACjD,QAAQ;YACR,OAAO;QACT,OAAO,IAAI,QAAQ,WAAW,GAAG,QAAQ,CAAC,WAAW;YACnD,QAAQ;YACR,OAAO;QACT,OAAO,IAAI,QAAQ,WAAW,GAAG,QAAQ,CAAC,cAAc;YACtD,OAAO;QACT,OAAO,IAAI,QAAQ,WAAW,GAAG,QAAQ,CAAC,mBAAmB,QAAQ,WAAW,GAAG,QAAQ,CAAC,cAAc;YACxG,OAAO;QACT;QAEA,OAAO;YACL;YACA;YACA;QACF;IACF;AACF","debugId":null}},
    {"offset": {"line": 852, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/domains/weights/repository.ts"],"sourcesContent":["import { get, post, put, del } from '../../base';\nimport type { \n  WeightEntriesApiResponse,\n  WeightEntry,\n  WeightFormData\n} from '@/types/weights';\n\n// Handles data access operations using existing API functions\nexport class WeightRepository {\n  async getWeightEntries(petId: string): Promise<WeightEntriesApiResponse> {\n    return await get<WeightEntriesApiResponse>(`/api/pets/${petId}/weights`);\n  }\n\n  async getWeightEntryById(petId: string, weightId: string): Promise<WeightEntry> {\n    const result = await get<{ weightEntry: WeightEntry }>(`/api/pets/${petId}/weights/${weightId}`);\n    return result.weightEntry;\n  }\n\n  async createWeightEntry(petId: string, weightData: WeightFormData): Promise<WeightEntry> {\n    const result = await post<{ weightEntry: WeightEntry }, WeightFormData>(\n      `/api/pets/${petId}/weights`, \n      weightData\n    );\n    return result.weightEntry;\n  }\n\n  async updateWeightEntry(\n    petId: string, \n    weightId: string, \n    weightData: Partial<WeightFormData>\n  ): Promise<WeightEntry> {\n    const result = await put<{ weightEntry: WeightEntry }, Partial<WeightFormData>>(\n      `/api/pets/${petId}/weights/${weightId}`, \n      weightData\n    );\n    return result.weightEntry;\n  }\n\n  async deleteWeightEntry(petId: string, weightId: string): Promise<void> {\n    await del<{ message: string }>(`/api/pets/${petId}/weights/${weightId}`);\n  }\n}\n\n// Default repository instance\nexport const weightRepository = new WeightRepository();"],"names":[],"mappings":";;;;AAAA;AAAA;;AAQO,MAAM;IACX,MAAM,iBAAiB,KAAa,EAAqC;QACvE,OAAO,MAAM,CAAA,GAAA,wJAAA,CAAA,MAAG,AAAD,EAA4B,CAAC,UAAU,EAAE,MAAM,QAAQ,CAAC;IACzE;IAEA,MAAM,mBAAmB,KAAa,EAAE,QAAgB,EAAwB;QAC9E,MAAM,SAAS,MAAM,CAAA,GAAA,wJAAA,CAAA,MAAG,AAAD,EAAgC,CAAC,UAAU,EAAE,MAAM,SAAS,EAAE,UAAU;QAC/F,OAAO,OAAO,WAAW;IAC3B;IAEA,MAAM,kBAAkB,KAAa,EAAE,UAA0B,EAAwB;QACvF,MAAM,SAAS,MAAM,CAAA,GAAA,wJAAA,CAAA,OAAI,AAAD,EACtB,CAAC,UAAU,EAAE,MAAM,QAAQ,CAAC,EAC5B;QAEF,OAAO,OAAO,WAAW;IAC3B;IAEA,MAAM,kBACJ,KAAa,EACb,QAAgB,EAChB,UAAmC,EACb;QACtB,MAAM,SAAS,MAAM,CAAA,GAAA,wJAAA,CAAA,MAAG,AAAD,EACrB,CAAC,UAAU,EAAE,MAAM,SAAS,EAAE,UAAU,EACxC;QAEF,OAAO,OAAO,WAAW;IAC3B;IAEA,MAAM,kBAAkB,KAAa,EAAE,QAAgB,EAAiB;QACtE,MAAM,CAAA,GAAA,wJAAA,CAAA,MAAG,AAAD,EAAuB,CAAC,UAAU,EAAE,MAAM,SAAS,EAAE,UAAU;IACzE;AACF;AAGO,MAAM,mBAAmB,IAAI","debugId":null}},
    {"offset": {"line": 886, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/validations/weight.ts"],"sourcesContent":["import { z } from 'zod';\nimport type { WeightUnit } from '@/types/pet';\n\n// Base weight entry validation schema\nexport const weightEntryFormSchema = z.object({\n  weight: z\n    .string()\n    .min(1, 'Weight is required')\n    .refine((val) => {\n      const num = parseFloat(val);\n      return !isNaN(num) && num > 0;\n    }, 'Weight must be a positive number'),\n  \n  date: z\n    .string()\n    .min(1, 'Date is required')\n    .refine((date) => {\n      const parsedDate = new Date(date);\n      const today = new Date();\n      today.setHours(23, 59, 59, 999); // Set to end of today\n      \n      // Check if it's a valid date and not in the future\n      return !isNaN(parsedDate.getTime()) && parsedDate <= today;\n    }, 'Date cannot be in the future'),\n});\n\n// Enhanced validation with unit-specific weight limits\nexport const createWeightEntrySchema = (weightUnit: WeightUnit) => {\n  return weightEntryFormSchema.refine((data) => {\n    const weight = parseFloat(data.weight);\n    if (isNaN(weight) || weight <= 0) return false;\n    \n    // Unit-specific validation (same limits as pet validation)\n    if (weightUnit === 'kg') {\n      return weight <= 200; // Max 200kg (440 lbs)\n    } else if (weightUnit === 'lbs') {\n      return weight <= 440; // Max 440 lbs (200kg)\n    }\n    \n    return true;\n  }, {\n    message: `Weight exceeds maximum allowed (200kg / 440lbs)`,\n    path: ['weight']\n  });\n};\n\n// Export types\nexport type WeightFormData = z.infer<typeof weightEntryFormSchema>;\n\n// Utility functions for validation\nexport const validateWeightEntry = (data: unknown, weightUnit: WeightUnit) => {\n  const schema = createWeightEntrySchema(weightUnit);\n  return schema.safeParse(data);\n};\n\n// Date formatting utilities for weight tracking\nexport const formatDateForDisplay = (dateString: string): string => {\n  const date = new Date(dateString);\n  return date.toLocaleDateString('en-US', { \n    year: 'numeric', \n    month: 'short', \n    day: 'numeric' \n  });\n};\n\nexport const formatDateForInput = (dateString: string): string => {\n  const date = new Date(dateString);\n  return date.toISOString().split('T')[0]; // YYYY-MM-DD format\n};\n\nexport const getTodayDateString = (): string => {\n  return new Date().toISOString().split('T')[0];\n};"],"names":[],"mappings":";;;;;;;;AAAA;AAAA;;AAIO,MAAM,wBAAwB,iLAAA,CAAA,IAAC,CAAC,MAAM,CAAC;IAC5C,QAAQ,iLAAA,CAAA,IAAC,CACN,MAAM,GACN,GAAG,CAAC,GAAG,sBACP,MAAM,CAAC,CAAC;QACP,MAAM,MAAM,WAAW;QACvB,OAAO,CAAC,MAAM,QAAQ,MAAM;IAC9B,GAAG;IAEL,MAAM,iLAAA,CAAA,IAAC,CACJ,MAAM,GACN,GAAG,CAAC,GAAG,oBACP,MAAM,CAAC,CAAC;QACP,MAAM,aAAa,IAAI,KAAK;QAC5B,MAAM,QAAQ,IAAI;QAClB,MAAM,QAAQ,CAAC,IAAI,IAAI,IAAI,MAAM,sBAAsB;QAEvD,mDAAmD;QACnD,OAAO,CAAC,MAAM,WAAW,OAAO,OAAO,cAAc;IACvD,GAAG;AACP;AAGO,MAAM,0BAA0B,CAAC;IACtC,OAAO,sBAAsB,MAAM,CAAC,CAAC;QACnC,MAAM,SAAS,WAAW,KAAK,MAAM;QACrC,IAAI,MAAM,WAAW,UAAU,GAAG,OAAO;QAEzC,2DAA2D;QAC3D,IAAI,eAAe,MAAM;YACvB,OAAO,UAAU,KAAK,sBAAsB;QAC9C,OAAO,IAAI,eAAe,OAAO;YAC/B,OAAO,UAAU,KAAK,sBAAsB;QAC9C;QAEA,OAAO;IACT,GAAG;QACD,SAAS,CAAC,+CAA+C,CAAC;QAC1D,MAAM;YAAC;SAAS;IAClB;AACF;AAMO,MAAM,sBAAsB,CAAC,MAAe;IACjD,MAAM,SAAS,wBAAwB;IACvC,OAAO,OAAO,SAAS,CAAC;AAC1B;AAGO,MAAM,uBAAuB,CAAC;IACnC,MAAM,OAAO,IAAI,KAAK;IACtB,OAAO,KAAK,kBAAkB,CAAC,SAAS;QACtC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF;AAEO,MAAM,qBAAqB,CAAC;IACjC,MAAM,OAAO,IAAI,KAAK;IACtB,OAAO,KAAK,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE,EAAE,oBAAoB;AAC/D;AAEO,MAAM,qBAAqB;IAChC,OAAO,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;AAC/C","debugId":null}},
    {"offset": {"line": 953, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/domains/weights/validator.ts"],"sourcesContent":["import { validateWeightEntry, type WeightFormData } from '@/lib/validations/weight';\nimport type { WeightUnit } from '@/types/pet';\n\nexport class WeightValidator {\n  validateWeightEntry(data: WeightFormData, weightUnit: WeightUnit) {\n    const result = validateWeightEntry(data, weightUnit);\n    \n    if (!result.success) {\n      const firstError = result.error.errors[0];\n      throw new Error(firstError.message);\n    }\n    \n    return result.data;\n  }\n\n  validateWeightValue(weight: string, weightUnit: WeightUnit): number {\n    const weightNum = parseFloat(weight);\n    \n    if (isNaN(weightNum) || weightNum <= 0) {\n      throw new Error('Weight must be a positive number');\n    }\n\n    // Unit-specific validation\n    if (weightUnit === 'kg' && weightNum > 200) {\n      throw new Error('Weight cannot exceed 200kg');\n    }\n    \n    if (weightUnit === 'lbs' && weightNum > 440) {\n      throw new Error('Weight cannot exceed 440lbs');\n    }\n\n    return weightNum;\n  }\n\n  validateDate(date: string): Date {\n    const parsedDate = new Date(date);\n    const today = new Date();\n    today.setHours(23, 59, 59, 999);\n    \n    if (isNaN(parsedDate.getTime())) {\n      throw new Error('Invalid date format');\n    }\n    \n    if (parsedDate > today) {\n      throw new Error('Date cannot be in the future');\n    }\n    \n    return parsedDate;\n  }\n}\n\n// Default validator instance\nexport const weightValidator = new WeightValidator();"],"names":[],"mappings":";;;;AAAA;;AAGO,MAAM;IACX,oBAAoB,IAAoB,EAAE,UAAsB,EAAE;QAChE,MAAM,SAAS,CAAA,GAAA,kJAAA,CAAA,sBAAmB,AAAD,EAAE,MAAM;QAEzC,IAAI,CAAC,OAAO,OAAO,EAAE;YACnB,MAAM,aAAa,OAAO,KAAK,CAAC,MAAM,CAAC,EAAE;YACzC,MAAM,IAAI,MAAM,WAAW,OAAO;QACpC;QAEA,OAAO,OAAO,IAAI;IACpB;IAEA,oBAAoB,MAAc,EAAE,UAAsB,EAAU;QAClE,MAAM,YAAY,WAAW;QAE7B,IAAI,MAAM,cAAc,aAAa,GAAG;YACtC,MAAM,IAAI,MAAM;QAClB;QAEA,2BAA2B;QAC3B,IAAI,eAAe,QAAQ,YAAY,KAAK;YAC1C,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,eAAe,SAAS,YAAY,KAAK;YAC3C,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO;IACT;IAEA,aAAa,IAAY,EAAQ;QAC/B,MAAM,aAAa,IAAI,KAAK;QAC5B,MAAM,QAAQ,IAAI;QAClB,MAAM,QAAQ,CAAC,IAAI,IAAI,IAAI;QAE3B,IAAI,MAAM,WAAW,OAAO,KAAK;YAC/B,MAAM,IAAI,MAAM;QAClB;QAEA,IAAI,aAAa,OAAO;YACtB,MAAM,IAAI,MAAM;QAClB;QAEA,OAAO;IACT;AACF;AAGO,MAAM,kBAAkB,IAAI","debugId":null}},
    {"offset": {"line": 1002, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/domains/weights/index.ts"],"sourcesContent":["import { WeightService } from './service';\nimport { weightRepository } from './repository';\nimport { weightValidator } from './validator';\nimport type { WeightFormData } from '@/types/weights';\nimport type { WeightUnit } from '@/types/pet';\n\n// Create configured service instance\nconst weightService = new WeightService(weightRepository, weightValidator);\n\n// Export the same interface pattern as petApi\nexport const weightApi = {\n  getWeightEntries: (petId: string) => weightService.getWeightEntries(petId),\n  getWeightEntryById: (petId: string, weightId: string) => weightService.getWeightEntryById(petId, weightId),\n  createWeightEntry: (petId: string, weightData: WeightFormData, weightUnit: WeightUnit) => \n    weightService.createWeightEntry(petId, weightData, weightUnit),\n  updateWeightEntry: (petId: string, weightId: string, weightData: Partial<WeightFormData>, weightUnit: WeightUnit) => \n    weightService.updateWeightEntry(petId, weightId, weightData, weightUnit),\n  deleteWeightEntry: (petId: string, weightId: string) => weightService.deleteWeightEntry(petId, weightId),\n};\n\n// Export the same error handler interface\nexport const weightErrorHandler = (error: unknown) => weightService.mapError(error);\n\n// Export types for consumers\nexport type { WeightEntriesApiResponse, WeightError } from './types';\n\n// Export individual components for testing or advanced use\nexport { WeightRepository } from './repository';\nexport { WeightValidator } from './validator';\nexport { WeightService } from './service';"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAIA,qCAAqC;AACrC,MAAM,gBAAgB,IAAI,iKAAA,CAAA,gBAAa,CAAC,oKAAA,CAAA,mBAAgB,EAAE,mKAAA,CAAA,kBAAe;AAGlE,MAAM,YAAY;IACvB,kBAAkB,CAAC,QAAkB,cAAc,gBAAgB,CAAC;IACpE,oBAAoB,CAAC,OAAe,WAAqB,cAAc,kBAAkB,CAAC,OAAO;IACjG,mBAAmB,CAAC,OAAe,YAA4B,aAC7D,cAAc,iBAAiB,CAAC,OAAO,YAAY;IACrD,mBAAmB,CAAC,OAAe,UAAkB,YAAqC,aACxF,cAAc,iBAAiB,CAAC,OAAO,UAAU,YAAY;IAC/D,mBAAmB,CAAC,OAAe,WAAqB,cAAc,iBAAiB,CAAC,OAAO;AACjG;AAGO,MAAM,qBAAqB,CAAC,QAAmB,cAAc,QAAQ,CAAC","debugId":null}},
    {"offset": {"line": 1042, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/validations/food.ts"],"sourcesContent":["import { z } from 'zod';\n\n\n// Base validation\nconst baseFoodValidation = {\n  brandName: z.string().trim().max(100, 'Brand name must be 100 characters or less').optional(),\n  productName: z.string().trim().max(150, 'Product name must be 150 characters or less').optional(),\n  dailyAmount: z.string()\n    .min(1, 'Daily amount is required')\n    .refine((val) => {\n      const num = parseFloat(val.replace(',', '.'));\n      return !isNaN(num) && num > 0;\n    }, 'Daily amount must be a positive number'),\n    dateStarted: z.string()\n    .min(1, 'Purchase date is required')\n    .refine((val) => {\n      const date = new Date(val);\n      return !isNaN(date.getTime()) && date <= new Date();\n    }, 'Purchase date must be valid and not in the future'),\n};\n\n// DRY FOOD VALIDATION\nexport const dryFoodSchema = z.object({\n  ...baseFoodValidation,\n  bagWeight: z.string()\n    .min(1, 'Bag weight is required')\n    .refine((val) => {\n      const num = parseFloat(val.replace(',', '.'));\n      return !isNaN(num) && num > 0;\n    }, 'Bag weight must be a positive number'),\n  bagWeightUnit: z.enum(['kg', 'pounds'], {\n    required_error: 'Bag weight unit is required',\n    invalid_type_error: 'Invalid bag weight unit for dry food'\n  }),\n  dryDailyAmountUnit: z.enum(['grams'], {\n    required_error: 'Daily amount unit is required',\n    invalid_type_error: 'Invalid daily amount unit for dry food'\n  }),\n}).superRefine((data, ctx) => {\n  // Validate daily amount doesn't exceed bag weight (basic sanity check)\n  const bagWeight = parseFloat(data.bagWeight.replace(',', '.'));\n  const dailyAmount = parseFloat(data.dailyAmount.replace(',', '.'));\n  \n  // Convert bag weight to grams for comparison\n  let bagWeightInGrams = bagWeight;\n  if (data.bagWeightUnit === 'kg') {\n    bagWeightInGrams = bagWeight * 1000; // kg to grams\n  } else if (data.bagWeightUnit === 'pounds') {\n    bagWeightInGrams = bagWeight * 453.592; // pounds to grams\n  }\n\n  // Convert daily amount to grams for comparison\n  const dailyAmountInGrams = dailyAmount;\n\n  // Check if daily amount exceeds total bag weight\n  if (dailyAmountInGrams >= bagWeightInGrams) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: 'Daily amount should be less than total bag weight',\n      path: ['dailyAmount']\n    });\n  }\n});\n\n// WET FOOD VALIDATION\nexport const wetFoodSchema = z.object({\n  ...baseFoodValidation,\n  numberOfUnits: z.string()  // âœ… Expects string (from form)\n    .min(1, 'Number of units is required')\n    .refine((val) => {\n      const num = parseInt(val, 10);\n      return !isNaN(num) && Number.isInteger(num) && num > 0;\n    }, 'Number of units must be a positive whole number'),\n  weightPerUnit: z.string()\n    .min(1, 'Weight per unit is required')\n    .refine((val) => {\n      const num = parseFloat(val.replace(',', '.'));\n      return !isNaN(num) && num > 0;\n    }, 'Weight per unit must be a positive number'),\n  wetWeightUnit: z.enum(['grams', 'oz'], {\n    required_error: 'Weight unit is required',\n    invalid_type_error: 'Invalid weight unit for wet food'\n  }),\n  wetDailyAmountUnit: z.enum(['grams', 'oz'], {\n    required_error: 'Daily amount unit is required',\n    invalid_type_error: 'Invalid daily amount unit for wet food'\n  }),\n}).superRefine((data, ctx) => {\n  // Calculate total weight for validation\n  const numberOfUnits = parseInt(data.numberOfUnits, 10);\n  const totalWeight = numberOfUnits * parseFloat(data.weightPerUnit.replace(',', '.'));\n  const dailyAmount = parseFloat(data.dailyAmount.replace(',', '.'));\n  \n  // Convert total weight to grams\n  let totalWeightInGrams = totalWeight;\n  if (data.wetWeightUnit === 'oz') {\n    totalWeightInGrams = totalWeight * 28.3495; // oz to grams\n  }\n\n  // Convert daily amount to grams\n  let dailyAmountInGrams = dailyAmount;\n  if (data.wetDailyAmountUnit === 'oz') {\n    dailyAmountInGrams = dailyAmount * 28.3495; // oz to grams\n  }\n  \n  if (dailyAmountInGrams >= totalWeightInGrams) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: 'Daily amount should be less than total weight',\n      path: ['dailyAmount']\n    });\n  }\n});\n\n// PARTIAL UPDATE SCHEMAS\nexport const updateDryFoodSchema = z.object({\n  brandName: z.string().trim().max(100).optional(),\n  productName: z.string().trim().max(150).optional(),\n  bagWeight: z.string().refine(val => {\n    if (!val) return true; // Allow empty for partial updates\n    const num = parseFloat(val.replace(',', '.'));\n    return !isNaN(num) && num > 0;\n  }, 'Bag weight must be a positive number').optional(),\n  bagWeightUnit: z.enum(['kg', 'pounds']).optional(),\n  dailyAmount: z.string().refine(val => {\n    if (!val) return true;\n    const num = parseFloat(val.replace(',', '.'));\n    return !isNaN(num) && num > 0;\n  }, 'Daily amount must be a positive number').optional(),\n  dryDailyAmountUnit: z.enum(['grams']).optional(),\n  dateStarted: z.string().refine(val => {\n    if (!val) return true;\n    const date = new Date(val);\n    return !isNaN(date.getTime()) && date <= new Date();\n  }, 'Invalid date or date cannot be in the future').optional(),\n});\n\nexport const updateWetFoodSchema = z.object({\n  brandName: z.string().trim().max(100).optional(),\n  productName: z.string().trim().max(150).optional(),\n  numberOfUnits: z.string()\n    .min(1, 'Number of units is required')\n    .refine((val) => {\n      const num = parseInt(val, 10);\n      return !isNaN(num) && Number.isInteger(num) && num > 0;\n    }, 'Number of units must be a positive whole number')\n    .optional(),\n  weightPerUnit: z.string().refine(val => {\n    if (!val) return true;\n    const num = parseFloat(val.replace(',', '.'));\n    return !isNaN(num) && num > 0;\n  }, 'Weight per unit must be a positive number').optional(),\n  wetWeightUnit: z.enum(['grams', 'oz']).optional(),\n  dailyAmount: z.string().refine(val => {\n    if (!val) return true;\n    const num = parseFloat(val.replace(',', '.'));\n    return !isNaN(num) && num > 0;\n  }, 'Daily amount must be a positive number').optional(),\n  wetDailyAmountUnit: z.enum(['grams', 'oz']).optional(),\n  dateStarted: z.string().refine(val => {\n    if (!val) return true;\n    const date = new Date(val);\n    return !isNaN(date.getTime()) && date <= new Date();\n  }, 'Invalid date or date cannot be in the future').optional(),\n});\n\n// HELPER FUNCTIONS\nexport function validateDryFoodData(data: unknown) {\n  const result = dryFoodSchema.safeParse(data);\n  if (!result.success) {\n    const errorMessage = result.error.errors.map(err => err.message).join(', ');\n    throw new Error(`Dry food validation failed: ${errorMessage}`);\n  }\n  return result.data;\n}\n\nexport function validateWetFoodData(data: unknown) {\n  const result = wetFoodSchema.safeParse(data);\n  if (!result.success) {\n    const errorMessage = result.error.errors.map(err => err.message).join(', ');\n    throw new Error(`Wet food validation failed: ${errorMessage}`);\n  }\n  return result.data;\n}\n\nexport function validateUpdateDryFoodData(data: unknown) {\n  const result = updateDryFoodSchema.safeParse(data);\n  if (!result.success) {\n    const errorMessage = result.error.errors.map(err => err.message).join(', ');\n    throw new Error(`Dry food update validation failed: ${errorMessage}`);\n  }\n  return result.data;\n}\n\nexport function validateUpdateWetFoodData(data: unknown) {\n  const result = updateWetFoodSchema.safeParse(data);\n  if (!result.success) {\n    const errorMessage = result.error.errors.map(err => err.message).join(', ');\n    throw new Error(`Wet food update validation failed: ${errorMessage}`);\n  }\n  return result.data;\n}\n\n// DATE HELPER\nexport const formatDateForDisplay = (dateString: string): string => {\n  const date = new Date(dateString);\n  return date.toLocaleDateString('en-US', {\n    year: 'numeric',\n    month: 'short',\n    day: 'numeric'\n  });\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1265, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/utils/food-formatting.ts"],"sourcesContent":["import type { DryFoodEntry, WetFoodEntry } from '@/types/food';\n\ntype FeedingStatus = 'overfeeding' | 'slightly-over' | 'normal' | 'slightly-under' | 'underfeeding';\n\nexport function formatVariancePercentage(variance: number): string {\n  const sign = variance > 0 ? '+' : '';\n  return `${sign}${variance.toFixed(1)}%`;\n}\n\nexport function getFeedingStatusColor(status: FeedingStatus): string {\n  switch (status) {\n    case 'overfeeding':\n      return 'bg-red-100 text-red-800 border-red-200';\n    case 'slightly-over':\n      return 'bg-orange-100 text-orange-800 border-orange-200';\n    case 'underfeeding':\n      return 'bg-red-100 text-red-800 border-red-200';\n    case 'slightly-under':\n      return 'bg-yellow-100 text-yellow-800 border-yellow-200';\n    case 'normal':\n      return 'bg-green-100 text-green-800 border-green-200';\n  }\n}\n\nexport function getFeedingStatusLabel(status: FeedingStatus): string {\n  switch (status) {\n    case 'overfeeding':\n      return 'Overfeeding';\n    case 'slightly-over':\n      return 'Slightly Overfeeding';\n    case 'underfeeding':\n      return 'Underfeeding';\n    case 'slightly-under':\n      return 'Slightly Underfeeding';\n    case 'normal':\n      return 'Normal';\n  }\n}\n\nexport function getFeedingStatusIcon(status: FeedingStatus): string {\n  switch (status) {\n    case 'overfeeding':\n      return 'ðŸ”´';\n    case 'slightly-over':\n      return 'ðŸŸ ';\n    case 'underfeeding':\n      return 'ðŸ”´';\n    case 'slightly-under':\n      return 'ðŸŸ¡';\n    case 'normal':\n      return 'ðŸŸ¢';\n  }\n}\n\n// export function formatConsumptionSummary(entry: DryFoodEntry | WetFoodEntry): string {\n//   if (!entry.actualDaysElapsed || !entry.feedingStatus) {\n//     return '';\n//   }\n\n//   const statusLabel = getFeedingStatusLabel(entry.feedingStatus);\n//   const icon = getFeedingStatusIcon(entry.feedingStatus);\n  \n//   return `${icon} ${statusLabel} - ${entry.actualDaysElapsed} days`;\n// }\n\nexport function calculateExpectedDays(entry: DryFoodEntry | WetFoodEntry): number {\n  if (entry.foodType === 'dry') {\n    const dryEntry = entry as DryFoodEntry;\n    const totalWeightGrams = parseFloat(dryEntry.bagWeight) * (dryEntry.bagWeightUnit === 'kg' ? 1000 : 453.592);\n    const dailyAmountGrams = parseFloat(dryEntry.dailyAmount);\n    return Math.ceil(totalWeightGrams / dailyAmountGrams);\n  } else {\n    const wetEntry = entry as WetFoodEntry;\n    const totalWeightGrams = wetEntry.numberOfUnits * parseFloat(wetEntry.weightPerUnit) * (wetEntry.wetWeightUnit === 'oz' ? 28.3495 : 1);\n    const dailyAmountGrams = parseFloat(wetEntry.dailyAmount) * (wetEntry.wetDailyAmountUnit === 'oz' ? 28.3495 : 1);\n    return Math.ceil(totalWeightGrams / dailyAmountGrams);\n  }\n}\n\nexport function formatFeedingStatusMessage(entry: DryFoodEntry | WetFoodEntry): string {\n  if (!entry.actualDaysElapsed || !entry.feedingStatus) {\n    return '';\n  }\n\n  const expectedDays = calculateExpectedDays(entry);\n  const daysDifference = Math.abs(entry.actualDaysElapsed - expectedDays);\n  const statusLabel = getFeedingStatusLabel(entry.feedingStatus);\n  const icon = getFeedingStatusIcon(entry.feedingStatus);\n\n  if (entry.feedingStatus === 'overfeeding' || entry.feedingStatus === 'slightly-over') {\n    return `${icon} ${statusLabel} by ~${daysDifference} day${daysDifference !== 1 ? 's' : ''}`;\n  } else if (entry.feedingStatus === 'underfeeding' || entry.feedingStatus === 'slightly-under') {\n    return `${icon} ${statusLabel} by ${daysDifference} day${daysDifference !== 1 ? 's' : ''}`;\n  } else {\n    return `${icon} ${statusLabel}`;\n  }\n}\n\n/**\n * Format weight with smart decimal precision\n * - < 0.1: 3 decimals (ex 0.009 kg)\n * - < 1: 2 decimals (ex 0.45 kg)\n * - >= 1: 1 decimal (ex 2.5 kg)\n */\nexport function formatRemainingWeight(weight: number): string {\n  if (weight < 0.1) {\n    return weight.toFixed(3).replace(/\\.?0+$/, '');\n  } else if (weight < 1) {\n    return weight.toFixed(2).replace(/\\.?0+$/, '');\n  } else {\n    return weight.toFixed(1).replace(/\\.?0+$/, '');\n  }\n}"],"names":[],"mappings":";;;;;;;;;AAIO,SAAS,yBAAyB,QAAgB;IACvD,MAAM,OAAO,WAAW,IAAI,MAAM;IAClC,OAAO,GAAG,OAAO,SAAS,OAAO,CAAC,GAAG,CAAC,CAAC;AACzC;AAEO,SAAS,sBAAsB,MAAqB;IACzD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;IACX;AACF;AAEO,SAAS,sBAAsB,MAAqB;IACzD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;IACX;AACF;AAEO,SAAS,qBAAqB,MAAqB;IACxD,OAAQ;QACN,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;QACT,KAAK;YACH,OAAO;IACX;AACF;AAaO,SAAS,sBAAsB,KAAkC;IACtE,IAAI,MAAM,QAAQ,KAAK,OAAO;QAC5B,MAAM,WAAW;QACjB,MAAM,mBAAmB,WAAW,SAAS,SAAS,IAAI,CAAC,SAAS,aAAa,KAAK,OAAO,OAAO,OAAO;QAC3G,MAAM,mBAAmB,WAAW,SAAS,WAAW;QACxD,OAAO,KAAK,IAAI,CAAC,mBAAmB;IACtC,OAAO;QACL,MAAM,WAAW;QACjB,MAAM,mBAAmB,SAAS,aAAa,GAAG,WAAW,SAAS,aAAa,IAAI,CAAC,SAAS,aAAa,KAAK,OAAO,UAAU,CAAC;QACrI,MAAM,mBAAmB,WAAW,SAAS,WAAW,IAAI,CAAC,SAAS,kBAAkB,KAAK,OAAO,UAAU,CAAC;QAC/G,OAAO,KAAK,IAAI,CAAC,mBAAmB;IACtC;AACF;AAEO,SAAS,2BAA2B,KAAkC;IAC3E,IAAI,CAAC,MAAM,iBAAiB,IAAI,CAAC,MAAM,aAAa,EAAE;QACpD,OAAO;IACT;IAEA,MAAM,eAAe,sBAAsB;IAC3C,MAAM,iBAAiB,KAAK,GAAG,CAAC,MAAM,iBAAiB,GAAG;IAC1D,MAAM,cAAc,sBAAsB,MAAM,aAAa;IAC7D,MAAM,OAAO,qBAAqB,MAAM,aAAa;IAErD,IAAI,MAAM,aAAa,KAAK,iBAAiB,MAAM,aAAa,KAAK,iBAAiB;QACpF,OAAO,GAAG,KAAK,CAAC,EAAE,YAAY,KAAK,EAAE,eAAe,IAAI,EAAE,mBAAmB,IAAI,MAAM,IAAI;IAC7F,OAAO,IAAI,MAAM,aAAa,KAAK,kBAAkB,MAAM,aAAa,KAAK,kBAAkB;QAC7F,OAAO,GAAG,KAAK,CAAC,EAAE,YAAY,IAAI,EAAE,eAAe,IAAI,EAAE,mBAAmB,IAAI,MAAM,IAAI;IAC5F,OAAO;QACL,OAAO,GAAG,KAAK,CAAC,EAAE,aAAa;IACjC;AACF;AAQO,SAAS,sBAAsB,MAAc;IAClD,IAAI,SAAS,KAAK;QAChB,OAAO,OAAO,OAAO,CAAC,GAAG,OAAO,CAAC,UAAU;IAC7C,OAAO,IAAI,SAAS,GAAG;QACrB,OAAO,OAAO,OAAO,CAAC,GAAG,OAAO,CAAC,UAAU;IAC7C,OAAO;QACL,OAAO,OAAO,OAAO,CAAC,GAAG,OAAO,CAAC,UAAU;IAC7C;AACF","debugId":null}},
    {"offset": {"line": 1364, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/domains/food/service.ts"],"sourcesContent":["import type { FoodRepository } from './repository';\nimport type { FoodValidator } from './validator';\nimport type { \n  DryFoodEntry, \n  WetFoodEntry, \n  DryFoodFormData, \n  WetFoodFormData,\n  DryFoodEntriesApiResponse,\n  WetFoodEntriesApiResponse,\n  AllFoodEntriesApiResponse\n} from '@/types/food';\nimport { \n  ApiError,\n  NotFoundError,\n  ValidationError,\n  UnauthorizedError,\n  ForbiddenError,\n} from '../../errors';\n\nexport type FoodError = {\n  message: string;\n  field?: keyof (DryFoodFormData & WetFoodFormData);\n  code: string;\n}\n\nexport class FoodService {\n  constructor(\n    private repository: FoodRepository,\n    private validator: FoodValidator\n  ) {}\n\n  // Dry food methods\n  async getDryFoodEntries(petId: string): Promise<DryFoodEntriesApiResponse> {\n    try {\n      this.validator.validatePetId(petId);\n      return await this.repository.getDryFoodEntries(petId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async getDryFoodEntryById(petId: string, foodId: string): Promise<DryFoodEntry> {\n    try {\n      this.validator.validatePetId(petId);\n      this.validator.validateFoodId(foodId);\n      return await this.repository.getDryFoodEntryById(petId, foodId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async createDryFoodEntry(petId: string, foodData: DryFoodFormData): Promise<DryFoodEntry> {\n    try {\n      this.validator.validatePetId(petId);\n      const validatedData = this.validator.validateDryFoodData(foodData);\n      return await this.repository.createDryFoodEntry(petId, validatedData);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async updateDryFoodEntry(\n      petId: string, \n      foodId: string, \n      foodData: Partial<DryFoodFormData>\n    ): Promise<DryFoodEntry> {\n      try {\n        this.validator.validatePetId(petId);\n        this.validator.validateFoodId(foodId);\n        const validatedData = this.validator.validateUpdateDryFoodData(foodData);\n        return await this.repository.updateDryFoodEntry(petId, foodId, validatedData);\n      } catch (error) {\n        throw this.handleError(error);\n      }\n    }\n\n  async getFinishedDryFoodEntries(petId: string, limit: number = 10): Promise<DryFoodEntriesApiResponse> {\n    try {\n      this.validator.validatePetId(petId);\n      return await this.repository.getFinishedDryFoodEntries(petId, limit);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  // Wet food methods\n  async getWetFoodEntries(petId: string): Promise<WetFoodEntriesApiResponse> {\n    try {\n      this.validator.validatePetId(petId);\n      return await this.repository.getWetFoodEntries(petId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async getWetFoodEntryById(petId: string, foodId: string): Promise<WetFoodEntry> {\n    try {\n      this.validator.validatePetId(petId);\n      this.validator.validateFoodId(foodId);\n      return await this.repository.getWetFoodEntryById(petId, foodId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async createWetFoodEntry(petId: string, foodData: WetFoodFormData): Promise<WetFoodEntry> {\n    try {\n      this.validator.validatePetId(petId);\n      const validatedData = this.validator.validateWetFoodData(foodData)\n      return await this.repository.createWetFoodEntry(petId, validatedData);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async updateWetFoodEntry(\n    petId: string, \n    foodId: string, \n    foodData: Partial<WetFoodFormData>\n  ): Promise<WetFoodEntry> {\n    try {\n      this.validator.validatePetId(petId);\n      this.validator.validateFoodId(foodId);\n      const validatedData = this.validator.validateUpdateWetFoodData(foodData);\n      return await this.repository.updateWetFoodEntry(petId, foodId, validatedData);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async getFinishedWetFoodEntries(petId: string, limit: number = 10): Promise<WetFoodEntriesApiResponse> {\n    try {\n      this.validator.validatePetId(petId);\n      return await this.repository.getFinishedWetFoodEntries(petId, limit);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  // Combined methods\n  async getAllFoodEntries(petId: string): Promise<AllFoodEntriesApiResponse> {\n    try {\n      this.validator.validatePetId(petId);\n      return await this.repository.getAllFoodEntries(petId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async deleteFoodEntry(petId: string, foodId: string): Promise<void> {\n    try {\n      this.validator.validatePetId(petId);\n      this.validator.validateFoodId(foodId)\n      return await this.repository.deleteFoodEntry(petId, foodId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  async markFoodAsFinished(petId: string, foodId: string): Promise<DryFoodEntry | WetFoodEntry> {\n    try {\n      this.validator.validatePetId(petId);\n      this.validator.validateFoodId(foodId);\n      return await this.repository.markFoodAsFinished(petId, foodId);\n    } catch (error) {\n      throw this.handleError(error);\n    }\n  }\n\n  //Error handling\n  private handleError(error: unknown): Error {\n    if (error instanceof ApiError) {\n      return error;\n    } \n    if (error instanceof Error) {\n      return new ApiError(error.message, 500, 'FOOD_ERROR');\n    }\n    return new ApiError('An unexpected error occurred', 500, 'FOOD_ERROR');\n  }\n\n  mapError(error: unknown): FoodError {\n      let message = 'An error occurred while processing your request';\n      let field: keyof (DryFoodFormData & WetFoodFormData) | undefined;\n      let code = 'FOOD_ERROR';\n\n      if (error instanceof ValidationError) {\n        message = error.message;\n        field = error.field as keyof (DryFoodFormData & WetFoodFormData);\n        code = 'VALIDATION_ERROR';\n      } else if (error instanceof NotFoundError) {\n        message = 'Food entry not found';\n        code = 'NOT_FOUND';\n      } else if (error instanceof UnauthorizedError) {\n        message = 'You must be logged in to perform this action';\n        code = 'UNAUTHORIZED';\n      } else if (error instanceof ForbiddenError) {\n        message = 'You do not have permission to perform this action';\n        code = 'FORBIDDEN';\n      } else if (error instanceof ApiError) {\n        message = error.message;\n        code = error.code || 'API_ERROR';\n      } else if (error instanceof Error) {\n        message = error.message;\n      }\n\n      return { message, field, code };\n    }\n  }"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1539, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/domains/food/repository.ts"],"sourcesContent":["import { get, post, put, del, patch } from '../../base';\nimport type { \n  DryFoodEntry,\n  WetFoodEntry,\n  DryFoodFormData,\n  WetFoodFormData,\n  DryFoodEntriesApiResponse,\n  WetFoodEntriesApiResponse,\n  AllFoodEntriesApiResponse\n} from '@/types/food';\n\nexport class FoodRepository {\n  // Dry food methods\n  async getDryFoodEntries(petId: string): Promise<DryFoodEntriesApiResponse> {\n    return await get<DryFoodEntriesApiResponse>(\n      `/api/pets/${petId}/food/dry`);\n  }\n\n  async getDryFoodEntryById(petId: string, foodId: string): Promise<DryFoodEntry> {\n    const result = await get<{ foodEntry: DryFoodEntry }>(\n      `/api/pets/${petId}/food/dry/${foodId}`);\n    return result.foodEntry;\n  }\n\n  async createDryFoodEntry(petId: string, foodData: DryFoodFormData): Promise<DryFoodEntry> {\n    const result = await post<{ foodEntry: DryFoodEntry }, DryFoodFormData>(\n      `/api/pets/${petId}/food/dry`, \n      foodData\n    );\n    return result.foodEntry;\n  }\n\n  async updateDryFoodEntry(petId: string, foodId: string, foodData: Partial<DryFoodFormData>): Promise<DryFoodEntry> {\n    const result = await put<{ foodEntry: DryFoodEntry }, Partial<DryFoodFormData>>(\n      `/api/pets/${petId}/food/dry/${foodId}`, \n      foodData\n    );\n    return result.foodEntry;\n  }\n\n  async getFinishedDryFoodEntries(petId: string, limit: number = 10): Promise<DryFoodEntriesApiResponse> {\n    return await get<DryFoodEntriesApiResponse>(\n      `/api/pets/${petId}/food/finished`,\n      { foodType: 'dry', limit }\n    );\n  }\n\n  // Wet food methods\n  async getWetFoodEntries(petId: string): Promise<WetFoodEntriesApiResponse> {\n    return await get<WetFoodEntriesApiResponse>(\n      `/api/pets/${petId}/food/wet`);\n  }\n\n  async getWetFoodEntryById(petId: string, foodId: string): Promise<WetFoodEntry> {\n    const result = await get<{ foodEntry: WetFoodEntry }>(\n      `/api/pets/${petId}/food/wet/${foodId}`);\n    return result.foodEntry;\n  }\n\n  async createWetFoodEntry(petId: string, foodData: WetFoodFormData): Promise<WetFoodEntry> {\n    const result = await post<{ foodEntry: WetFoodEntry }, WetFoodFormData>(\n      `/api/pets/${petId}/food/wet`, \n      foodData\n    );\n    return result.foodEntry;\n  }\n\n  async updateWetFoodEntry(petId: string, foodId: string, foodData: Partial<WetFoodFormData>): Promise<WetFoodEntry> {\n    const result = await put<{ foodEntry: WetFoodEntry }, Partial<WetFoodFormData>>(\n      `/api/pets/${petId}/food/wet/${foodId}`, \n      foodData\n    );\n    return result.foodEntry;\n  }\n\n  async getFinishedWetFoodEntries(petId: string, limit: number = 10): Promise<WetFoodEntriesApiResponse> {\n    return await get<WetFoodEntriesApiResponse>(\n      `/api/pets/${petId}/food/finished`,\n      { foodType: 'wet', limit }\n    );\n  }\n\n  // Combined methods\n  async getAllFoodEntries(petId: string): Promise<AllFoodEntriesApiResponse> {\n    return await get<AllFoodEntriesApiResponse>(\n      `/api/pets/${petId}/food`);\n  }\n\n  async deleteFoodEntry(petId: string, foodId: string): Promise<void> {\n    await del<{ message: string }>(\n      `/api/pets/${petId}/food/${foodId}`);\n  }\n\n  async markFoodAsFinished(petId: string, foodId: string): Promise<DryFoodEntry | WetFoodEntry> {\n    const result = await patch<{ foodEntry: DryFoodEntry | WetFoodEntry }>(\n      `/api/pets/${petId}/food/${foodId}/finish`);\n    return result.foodEntry;\n  }\n\n  async updateFinishDate(petId: string, foodId: string, dateFinished: string): Promise<DryFoodEntry | WetFoodEntry> {\n    const result = await put<{ foodEntry: DryFoodEntry | WetFoodEntry }, { dateFinished: string }>(\n      `/api/pets/${petId}/food/${foodId}/finish-date`, { dateFinished }\n    );\n    return result.foodEntry;\n  }\n}\n\nexport const foodRepository = new FoodRepository();"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1616, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/domains/food/validator.ts"],"sourcesContent":["import { validateDryFoodData, validateWetFoodData, validateUpdateDryFoodData, validateUpdateWetFoodData } from '@/lib/validations/food';\nimport type { DryFoodFormData, WetFoodFormData } from '@/types/food';\nimport { ValidationError } from '../../errors';\n\nexport class FoodValidator {\n  validateDryFoodData(data: unknown): DryFoodFormData {\n    try {\n      return validateDryFoodData(data);\n    } catch (error) {\n      if (error instanceof Error) {\n        throw new ValidationError(error.message, 'validation');\n      }\n      throw new ValidationError('Dry food validation failed', 'validation');\n    }\n  }\n\n  validateWetFoodData(data: unknown): WetFoodFormData {\n    try {\n      return validateWetFoodData(data);\n    } catch (error) {\n      if (error instanceof Error) {\n        throw new ValidationError(error.message, 'validation');\n      }\n      throw new ValidationError('Wet food validation failed', 'validation');\n    }\n  }\n\n  validateUpdateDryFoodData(data: unknown): Partial<DryFoodFormData> {\n    try {\n      return validateUpdateDryFoodData(data);\n    } catch (error) {\n      if (error instanceof Error) {\n        throw new ValidationError(error.message, 'validation');\n      }\n      throw new ValidationError('Dry food update validation failed', 'validation');\n    }\n  }\n\n  validateUpdateWetFoodData(data: unknown): Partial<WetFoodFormData> {\n    try {\n      return validateUpdateWetFoodData(data);\n    } catch (error) {\n      if (error instanceof Error) {\n        throw new ValidationError(error.message, 'validation');\n      }\n      throw new ValidationError('Wet food update validation failed', 'validation');\n    }\n  }\n\n  validateFoodId(foodId: string): string {\n    if (!foodId || typeof foodId !== 'string' || foodId.trim().length === 0) {\n      throw new ValidationError('Valid food ID is required', 'foodId');\n    }\n    return foodId.trim();\n  }\n\n  validatePetId(petId: string): string {\n    if (!petId || typeof petId !== 'string' || petId.trim().length === 0) {\n      throw new ValidationError('Valid pet ID is required', 'petId');\n    }\n    return petId.trim();\n  }\n}\n\n// Default validator instance\nexport const foodValidator = new FoodValidator();"],"names":[],"mappings":";;;;AAAA;AAEA;;;AAEO,MAAM;IACX,oBAAoB,IAAa,EAAmB;QAClD,IAAI;YACF,OAAO,CAAA,GAAA,gJAAA,CAAA,sBAAmB,AAAD,EAAE;QAC7B,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,MAAM,OAAO,EAAE;YAC3C;YACA,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,8BAA8B;QAC1D;IACF;IAEA,oBAAoB,IAAa,EAAmB;QAClD,IAAI;YACF,OAAO,CAAA,GAAA,gJAAA,CAAA,sBAAmB,AAAD,EAAE;QAC7B,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,MAAM,OAAO,EAAE;YAC3C;YACA,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,8BAA8B;QAC1D;IACF;IAEA,0BAA0B,IAAa,EAA4B;QACjE,IAAI;YACF,OAAO,CAAA,GAAA,gJAAA,CAAA,4BAAyB,AAAD,EAAE;QACnC,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,MAAM,OAAO,EAAE;YAC3C;YACA,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,qCAAqC;QACjE;IACF;IAEA,0BAA0B,IAAa,EAA4B;QACjE,IAAI;YACF,OAAO,CAAA,GAAA,gJAAA,CAAA,4BAAyB,AAAD,EAAE;QACnC,EAAE,OAAO,OAAO;YACd,IAAI,iBAAiB,OAAO;gBAC1B,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,MAAM,OAAO,EAAE;YAC3C;YACA,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,qCAAqC;QACjE;IACF;IAEA,eAAe,MAAc,EAAU;QACrC,IAAI,CAAC,UAAU,OAAO,WAAW,YAAY,OAAO,IAAI,GAAG,MAAM,KAAK,GAAG;YACvE,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,6BAA6B;QACzD;QACA,OAAO,OAAO,IAAI;IACpB;IAEA,cAAc,KAAa,EAAU;QACnC,IAAI,CAAC,SAAS,OAAO,UAAU,YAAY,MAAM,IAAI,GAAG,MAAM,KAAK,GAAG;YACpE,MAAM,IAAI,0IAAA,CAAA,kBAAe,CAAC,4BAA4B;QACxD;QACA,OAAO,MAAM,IAAI;IACnB;AACF;AAGO,MAAM,gBAAgB,IAAI","debugId":null}},
    {"offset": {"line": 1685, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/lib/api/domains/food/index.ts"],"sourcesContent":["import { FoodService } from './service';\nimport { foodRepository } from './repository';\nimport { foodValidator } from './validator';\nimport type { DryFoodFormData, WetFoodFormData } from '@/types/food';\n\nconst foodService = new FoodService(foodRepository, foodValidator);\n\n// API exports\nexport const dryFoodApi = {\n  getDryFoodEntries: (petId: string) => foodService.getDryFoodEntries(petId),\n  getFinishedDryFoodEntries: (petId: string, limit?: number) => foodService.getFinishedDryFoodEntries(petId, limit),\n  createDryFoodEntry: (petId: string, foodData: DryFoodFormData) => \n    foodService.createDryFoodEntry(petId, foodData),\n  updateDryFoodEntry: (petId: string, foodId: string, foodData: Partial<DryFoodFormData>) => \n    foodService.updateDryFoodEntry(petId, foodId, foodData),\n};\n\nexport const wetFoodApi = {\n  getWetFoodEntries: (petId: string) => foodService.getWetFoodEntries(petId),\n  getFinishedWetFoodEntries: (petId: string, limit?: number) => foodService.getFinishedWetFoodEntries(petId, limit),\n  createWetFoodEntry: (petId: string, foodData: WetFoodFormData) => \n    foodService.createWetFoodEntry(petId, foodData),\n  updateWetFoodEntry: (petId: string, foodId: string, foodData: Partial<WetFoodFormData>) => \n    foodService.updateWetFoodEntry(petId, foodId, foodData),\n};\n\nexport const foodApi = {\n  getAllFoodEntries: (petId: string) => foodService.getAllFoodEntries(petId),\n  deleteFoodEntry: (petId: string, foodId: string) => foodService.deleteFoodEntry(petId, foodId),\n  markFoodAsFinished: (petId: string, foodId: string) => foodService.markFoodAsFinished(petId, foodId),\n  updateFinishDate: (petId: string, foodId: string, dateFinished: string) => foodRepository.updateFinishDate(petId, foodId, dateFinished),\n};\n\n// Export error handler\nexport const foodErrorHandler = (error: unknown) => foodService.mapError(error);\n\n// Export types for consumers\nexport type { \n  DryFoodEntry, \n  WetFoodEntry, \n  DryFoodFormData, \n  WetFoodFormData,\n  DryFoodEntriesApiResponse,\n  WetFoodEntriesApiResponse,\n  AllFoodEntriesApiResponse,\n  FoodError,\n  FoodEntriesApiResponse\n} from './types';\n\nexport { FoodRepository } from './repository';\nexport { FoodValidator } from './validator';\nexport { FoodService } from './service';"],"names":[],"mappings":";;;;;;AAAA;AACA;AACA;;;;AAGA,MAAM,cAAc,IAAI,8JAAA,CAAA,cAAW,CAAC,iKAAA,CAAA,iBAAc,EAAE,gKAAA,CAAA,gBAAa;AAG1D,MAAM,aAAa;IACxB,mBAAmB,CAAC,QAAkB,YAAY,iBAAiB,CAAC;IACpE,2BAA2B,CAAC,OAAe,QAAmB,YAAY,yBAAyB,CAAC,OAAO;IAC3G,oBAAoB,CAAC,OAAe,WAClC,YAAY,kBAAkB,CAAC,OAAO;IACxC,oBAAoB,CAAC,OAAe,QAAgB,WAClD,YAAY,kBAAkB,CAAC,OAAO,QAAQ;AAClD;AAEO,MAAM,aAAa;IACxB,mBAAmB,CAAC,QAAkB,YAAY,iBAAiB,CAAC;IACpE,2BAA2B,CAAC,OAAe,QAAmB,YAAY,yBAAyB,CAAC,OAAO;IAC3G,oBAAoB,CAAC,OAAe,WAClC,YAAY,kBAAkB,CAAC,OAAO;IACxC,oBAAoB,CAAC,OAAe,QAAgB,WAClD,YAAY,kBAAkB,CAAC,OAAO,QAAQ;AAClD;AAEO,MAAM,UAAU;IACrB,mBAAmB,CAAC,QAAkB,YAAY,iBAAiB,CAAC;IACpE,iBAAiB,CAAC,OAAe,SAAmB,YAAY,eAAe,CAAC,OAAO;IACvF,oBAAoB,CAAC,OAAe,SAAmB,YAAY,kBAAkB,CAAC,OAAO;IAC7F,kBAAkB,CAAC,OAAe,QAAgB,eAAyB,iKAAA,CAAA,iBAAc,CAAC,gBAAgB,CAAC,OAAO,QAAQ;AAC5H;AAGO,MAAM,mBAAmB,CAAC,QAAmB,YAAY,QAAQ,CAAC","debugId":null}},
    {"offset": {"line": 1737, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/hooks/usePets.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { petApi, petErrorHandler } from '@/lib/api/pets';\nimport { useErrorState } from '@/hooks/useErrorsState';\nimport type { Pet, PetFormData } from '@/types/pet';\nimport { toastService } from '@/lib/toast';\n\ninterface UsePetsState {\n  pets: Pet[];\n  isLoading: boolean;\n  error: string | null;\n}\n\ninterface UsePetsReturn extends UsePetsState {\n  refreshPets: () => Promise<void>;\n  createPet: (petData: PetFormData) => Promise<Pet | null>;\n  updatePet: (petId: string, petData: Partial<PetFormData>) => Promise<Pet | null>;\n  deletePet: (petId: string) => Promise<boolean>;\n  getPetById: (petId: string) => Pet | undefined;\n}\n\nexport function usePets(): UsePetsReturn {\n  const [state, setState] = useState<UsePetsState>({\n    pets: [],\n    isLoading: true,\n    error: null,\n  });\n\n  const { executeAction } = useErrorState();\n\n  // Load all pets\n  const loadPets = useCallback(async () => {\n    setState(prev => ({ ...prev, isLoading: true, error: null }));\n\n    try {\n      const response = await petApi.getPets();\n      setState({\n        pets: response.pets,\n        isLoading: false,\n        error: null,\n      });\n    } catch (error) {\n      const petError = petErrorHandler(error);\n      setState({\n        pets: [],\n        isLoading: false,\n        error: petError.message,\n      });\n    }\n  }, []);\n\n  // Public refresh function\n  const refreshPets = useCallback(async () => {\n    await loadPets();\n  }, [loadPets]);\n\n  // Create a new pet\n  const createPet = useCallback(async (petData: PetFormData): Promise<Pet | null> => {\n    const result = await executeAction(\n      async () => {\n\n        const transformedData = {\n        ...petData,\n        weight: petData.weight ? petData.weight.replace(',', '.') : ''\n        };\n\n        const newPet = await petApi.createPet(transformedData);\n        \n        // Update local state by adding the new pet\n        setState(prev => ({\n          ...prev,\n          pets: [newPet, ...prev.pets], // Add to beginning for newest first\n        }));\n\n        toastService.success('Pet created', `${newPet.name} has been added to your pets!`);\n        return newPet;\n      },\n      petErrorHandler\n    );\n\n    return result;\n  }, [executeAction]);\n\n  // Update an existing pet\n  const updatePet = useCallback(async (\n    petId: string, \n    petData: Partial<PetFormData>\n  ): Promise<Pet | null> => {\n    const result = await executeAction(\n      async () => {\n\n        const transformedData = {\n        ...petData,\n        weight: petData.weight ? petData.weight.replace(',', '.') : ''\n        };\n\n        const updatedPet = await petApi.updatePet(petId, transformedData);\n        \n        // Update local state\n        setState(prev => ({\n          ...prev,\n          pets: prev.pets.map(pet => \n            pet.id === petId ? updatedPet : pet\n          ),\n        }));\n\n        toastService.success('Pet updated', `${updatedPet.name}'s information has been updated!`);\n        return updatedPet;\n      },\n      petErrorHandler\n    );\n\n    return result;\n  }, [executeAction]);\n\n  // Delete a pet (soft delete)\n  const deletePet = useCallback(async (petId: string): Promise<boolean> => {\n    const petToDelete = state.pets.find(p => p.id === petId);\n    const petName = petToDelete?.name || 'Pet';\n\n    const result = await executeAction(\n      async () => {\n        await petApi.deletePet(petId);\n        \n        // Update local state by removing the pet\n        setState(prev => ({\n          ...prev,\n          pets: prev.pets.filter(pet => pet.id !== petId),\n        }));\n\n        toastService.success('Pet deleted', `${petName} has been removed from your pets.`);\n        return true;\n      },\n      petErrorHandler\n    );\n\n    return result || false;\n  }, [executeAction, state.pets]);\n\n  // Get a specific pet by ID\n  const getPetById = useCallback((petId: string): Pet | undefined => {\n    return state.pets.find(pet => pet.id === petId);\n  }, [state.pets]);\n\n  // Load pets on mount\n  useEffect(() => {\n    loadPets();\n  }, [loadPets]);\n\n  return {\n    ...state,\n    refreshPets,\n    createPet,\n    updatePet,\n    deletePet,\n    getPetById,\n  };\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1874, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/hooks/usePetForm.ts"],"sourcesContent":["import { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { petFormSchema, type PetFormData } from '@/lib/validations/pet';\nimport type { Pet } from '@/types/pet';\n\ninterface UsePetFormOptions {\n  defaultValues?: Partial<PetFormData>;\n  pet?: Pet; // For editing existing pets\n}\n\nexport function usePetForm(options: UsePetFormOptions = {}) {\n  const { defaultValues, pet } = options;\n\n  // Convert Pet data to form data if editing\n  const getInitialValues = (): PetFormData => {\n    if (pet) {\n      return {\n        name: pet.name,\n        animalType: pet.animalType,\n        species: pet.species || '',\n        gender: pet.gender,\n        birthDate: pet.birthDate || '',\n        weight: pet.weight ??'',\n        weightUnit: pet.weightUnit,\n        isNeutered: pet.isNeutered,\n        microchipNumber: pet.microchipNumber || '',\n        notes: pet.notes || '',\n      };\n    }\n\n    return {\n      name: '',\n      animalType: 'cat',\n      species: '',\n      gender: 'unknown',\n      birthDate: '',\n      weight: '',\n      weightUnit: 'kg',\n      isNeutered: false,\n      microchipNumber: '',\n      notes: '',\n      ...defaultValues,\n    };\n  };\n\n  const form = useForm<PetFormData>({\n    resolver: zodResolver(petFormSchema),\n    defaultValues: getInitialValues(),\n  });\n\n  // Reset form with new data (useful for switching between pets)\n  const resetWithPet = (newPet: Pet) => {\n    const formData: PetFormData = {\n      name: newPet.name,\n      animalType: newPet.animalType,\n      species: newPet.species || '',\n      gender: newPet.gender,\n      birthDate: newPet.birthDate || '',\n      weight: newPet.weight || '',\n      weightUnit: newPet.weightUnit,\n      isNeutered: newPet.isNeutered,\n      microchipNumber: newPet.microchipNumber || '',\n      notes: newPet.notes || '',\n    };\n    \n    form.reset(formData);\n  };\n\n  // Reset to empty form\n  const resetToEmpty = () => {\n    form.reset(getInitialValues());\n  };\n\n  return {\n    ...form,\n    resetWithPet,\n    resetToEmpty,\n  };\n}"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAQO,SAAS,WAAW,UAA6B,CAAC,CAAC;IACxD,MAAM,EAAE,aAAa,EAAE,GAAG,EAAE,GAAG;IAE/B,2CAA2C;IAC3C,MAAM,mBAAmB;QACvB,IAAI,KAAK;YACP,OAAO;gBACL,MAAM,IAAI,IAAI;gBACd,YAAY,IAAI,UAAU;gBAC1B,SAAS,IAAI,OAAO,IAAI;gBACxB,QAAQ,IAAI,MAAM;gBAClB,WAAW,IAAI,SAAS,IAAI;gBAC5B,QAAQ,IAAI,MAAM,IAAG;gBACrB,YAAY,IAAI,UAAU;gBAC1B,YAAY,IAAI,UAAU;gBAC1B,iBAAiB,IAAI,eAAe,IAAI;gBACxC,OAAO,IAAI,KAAK,IAAI;YACtB;QACF;QAEA,OAAO;YACL,MAAM;YACN,YAAY;YACZ,SAAS;YACT,QAAQ;YACR,WAAW;YACX,QAAQ;YACR,YAAY;YACZ,YAAY;YACZ,iBAAiB;YACjB,OAAO;YACP,GAAG,aAAa;QAClB;IACF;IAEA,MAAM,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAe;QAChC,UAAU,CAAA,GAAA,8JAAA,CAAA,cAAW,AAAD,EAAE,+IAAA,CAAA,gBAAa;QACnC,eAAe;IACjB;IAEA,+DAA+D;IAC/D,MAAM,eAAe,CAAC;QACpB,MAAM,WAAwB;YAC5B,MAAM,OAAO,IAAI;YACjB,YAAY,OAAO,UAAU;YAC7B,SAAS,OAAO,OAAO,IAAI;YAC3B,QAAQ,OAAO,MAAM;YACrB,WAAW,OAAO,SAAS,IAAI;YAC/B,QAAQ,OAAO,MAAM,IAAI;YACzB,YAAY,OAAO,UAAU;YAC7B,YAAY,OAAO,UAAU;YAC7B,iBAAiB,OAAO,eAAe,IAAI;YAC3C,OAAO,OAAO,KAAK,IAAI;QACzB;QAEA,KAAK,KAAK,CAAC;IACb;IAEA,sBAAsB;IACtB,MAAM,eAAe;QACnB,KAAK,KAAK,CAAC;IACb;IAEA,OAAO;QACL,GAAG,IAAI;QACP;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 1951, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/hooks/useWeightTracker.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { weightApi, weightErrorHandler } from '@/lib/api/domains/weights';\nimport type { \n  WeightEntry, \n  WeightFormData, \n  WeightEntriesApiResponse,\n  WeightChartData \n} from '@/types/weights';\nimport type { WeightUnit } from '@/types/pet';\nimport { formatDateForDisplay } from '@/lib/validations/weight';\nimport { toastService } from '@/lib/toast';\n\ninterface UseWeightTrackerOptions {\n  petId: string;\n  weightUnit: WeightUnit;\n}\n\nexport function useWeightTracker({ petId, weightUnit }: UseWeightTrackerOptions) {\n  const [weightEntries, setWeightEntries] = useState<WeightEntry[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchWeightEntries = useCallback(async () => {\n    if (!petId) return;\n    \n    try {\n      setIsLoading(true);\n      setError(null);\n      \n      const response: WeightEntriesApiResponse = await weightApi.getWeightEntries(petId);\n      setWeightEntries(response.weightEntries);\n    } catch (err) {\n      const weightError = weightErrorHandler(err);\n      setError(weightError.message);\n      console.error('Failed to fetch weight entries:', err);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [petId]);\n\n  const createWeightEntry = useCallback(async (weightData: WeightFormData): Promise<WeightEntry | null> => {\n    try {\n      const newEntry = await weightApi.createWeightEntry(petId, weightData, weightUnit);\n      \n      // Update local state optimistically\n      setWeightEntries(prev => [...prev, newEntry]);\n      \n      toastService.success('Weight entry added successfully');\n      return newEntry;\n    } catch (err) {\n      const weightError = weightErrorHandler(err);\n      toastService.error(weightError.message);\n      console.error('Failed to create weight entry:', err);\n      return null;\n    }\n  }, [petId, weightUnit]);\n\n  const updateWeightEntry = useCallback(async (\n    weightId: string, \n    weightData: Partial<WeightFormData>\n  ): Promise<WeightEntry | null> => {\n    try {\n      const updatedEntry = await weightApi.updateWeightEntry(petId, weightId, weightData, weightUnit);\n      \n      // Update local state\n      setWeightEntries(prev => \n        prev.map(entry => \n          entry.id === weightId ? updatedEntry : entry\n        )\n      );\n      \n      toastService.success('Weight entry updated successfully');\n      return updatedEntry;\n    } catch (err) {\n      const weightError = weightErrorHandler(err);\n      toastService.error(weightError.message);\n      console.error('Failed to update weight entry:', err);\n      return null;\n    }\n  }, [petId, weightUnit]);\n\n  const deleteWeightEntry = useCallback(async (weightId: string): Promise<boolean> => {\n    try {\n      await weightApi.deleteWeightEntry(petId, weightId);\n      \n      // Update local state\n      setWeightEntries(prev => prev.filter(entry => entry.id !== weightId));\n      \n      toastService.success('Weight entry deleted successfully');\n      return true;\n    } catch (err) {\n      const weightError = weightErrorHandler(err);\n      toastService.error(weightError.message);\n      console.error('Failed to delete weight entry:', err);\n      return false;\n    }\n  }, [petId]);\n\n  // Get sorted weight entries (oldest to newest for chart)\n  const sortedWeightEntries = weightEntries.sort((a, b) => \n    new Date(a.date).getTime() - new Date(b.date).getTime()\n  );\n\n  // Convert to chart data format\n  const chartData: WeightChartData[] = sortedWeightEntries.map(entry => ({\n    date: formatDateForDisplay(entry.date),\n    weight: parseFloat(entry.weight),\n    originalDate: entry.date,\n  }));\n\n  const latestWeight = sortedWeightEntries.length > 0 \n    ? sortedWeightEntries[sortedWeightEntries.length - 1] \n    : null;\n\n  // Fetch data on mount and when petId changes\n  useEffect(() => {\n    fetchWeightEntries();\n  }, [fetchWeightEntries]);\n\n  return {\n    // Data\n    weightEntries: sortedWeightEntries,\n    chartData,\n    latestWeight,\n    \n    // State\n    isLoading,\n    error,\n    \n    // Actions\n    createWeightEntry,\n    updateWeightEntry,\n    deleteWeightEntry,\n    refetchWeightEntries: fetchWeightEntries,\n  };\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2074, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/hooks/useWeightForm.ts"],"sourcesContent":["import { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { createWeightEntrySchema, getTodayDateString, type WeightFormData } from '@/lib/validations/weight';\nimport type { WeightEntry } from '@/types/weights';\nimport type { WeightUnit } from '@/types/pet';\n\ninterface UseWeightFormOptions {\n  weightUnit: WeightUnit;\n  weightEntry?: WeightEntry;\n  defaultValues?: Partial<WeightFormData>;\n}\n\nexport function useWeightForm(options: UseWeightFormOptions) {\n  const { weightUnit, weightEntry, defaultValues } = options;\n\n  const schema = createWeightEntrySchema(weightUnit);\n\n  const getInitialValues = (): WeightFormData => {\n    if (weightEntry) {\n      return {\n        weight: weightEntry.weight,\n        date: weightEntry.date,\n      };\n    }\n\n    return {\n      weight: '',\n      date: getTodayDateString(),\n      ...defaultValues,\n    };\n  };\n\n  const form = useForm<WeightFormData>({\n    resolver: zodResolver(schema),\n    defaultValues: getInitialValues(),\n  });\n\n  const resetWithWeightEntry = (newWeightEntry: WeightEntry) => {\n    const formData: WeightFormData = {\n      weight: newWeightEntry.weight,\n      date: newWeightEntry.date,\n    };\n    \n    form.reset(formData);\n  };\n\n  const resetToEmpty = () => {\n    form.reset({\n      weight: '',\n      date: getTodayDateString(),\n      ...defaultValues,\n    });\n  };\n\n  return {\n    ...form,\n    resetWithWeightEntry,\n    resetToEmpty,\n  };\n}"],"names":[],"mappings":";;;AAAA;AACA;AACA;;;;AAUO,SAAS,cAAc,OAA6B;IACzD,MAAM,EAAE,UAAU,EAAE,WAAW,EAAE,aAAa,EAAE,GAAG;IAEnD,MAAM,SAAS,CAAA,GAAA,kJAAA,CAAA,0BAAuB,AAAD,EAAE;IAEvC,MAAM,mBAAmB;QACvB,IAAI,aAAa;YACf,OAAO;gBACL,QAAQ,YAAY,MAAM;gBAC1B,MAAM,YAAY,IAAI;YACxB;QACF;QAEA,OAAO;YACL,QAAQ;YACR,MAAM,CAAA,GAAA,kJAAA,CAAA,qBAAkB,AAAD;YACvB,GAAG,aAAa;QAClB;IACF;IAEA,MAAM,OAAO,CAAA,GAAA,8JAAA,CAAA,UAAO,AAAD,EAAkB;QACnC,UAAU,CAAA,GAAA,8JAAA,CAAA,cAAW,AAAD,EAAE;QACtB,eAAe;IACjB;IAEA,MAAM,uBAAuB,CAAC;QAC5B,MAAM,WAA2B;YAC/B,QAAQ,eAAe,MAAM;YAC7B,MAAM,eAAe,IAAI;QAC3B;QAEA,KAAK,KAAK,CAAC;IACb;IAEA,MAAM,eAAe;QACnB,KAAK,KAAK,CAAC;YACT,QAAQ;YACR,MAAM,CAAA,GAAA,kJAAA,CAAA,qBAAkB,AAAD;YACvB,GAAG,aAAa;QAClB;IACF;IAEA,OAAO;QACL,GAAG,IAAI;QACP;QACA;IACF;AACF","debugId":null}},
    {"offset": {"line": 2129, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/hooks/useDryFoodTracker.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { dryFoodApi, foodApi, foodErrorHandler } from '@/lib/api/domains/food';\nimport type { DryFoodEntry, DryFoodFormData } from '@/types/food';\nimport { toastService } from '@/lib/toast';\n\ninterface UseDryFoodTrackerOptions {\n  petId: string;\n}\n\nexport function useDryFoodTracker({ petId }: UseDryFoodTrackerOptions) {\n  console.log('ðŸ”´ useDryFoodTracker HOOK CALLED with petId:', petId);\n\n  // Separate state for active and finished entries\n  const [activeDryFoodEntries, setActiveDryFoodEntries] = useState<DryFoodEntry[]>([]);\n  const [finishedDryFoodEntries, setFinishedDryFoodEntries] = useState<DryFoodEntry[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch active entries\n  const fetchActiveDryFoodEntries = useCallback(async () => {\n    if (!petId) return;\n    \n    try {\n      setError(null);\n      const response = await dryFoodApi.getDryFoodEntries(petId);\n      setActiveDryFoodEntries(response.foodEntries);\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      setError(foodError.message);\n      console.error('Failed to fetch active dry food entries:', err);\n    }\n  }, [petId]);\n\n  // Fetch finished entries\n  const fetchFinishedDryFoodEntries = useCallback(async () => {\n    if (!petId) return;\n    \n    try {\n      setError(null);\n      const response = await dryFoodApi.getFinishedDryFoodEntries(petId);\n      // Sort by dateFinished DESC (most recent first) as a safety measure\n      const sortedEntries = [...response.foodEntries].sort((a, b) => {\n        if (!a.dateFinished || !b.dateFinished) return 0;\n        return new Date(b.dateFinished).getTime() - new Date(a.dateFinished).getTime();\n      });\n      setFinishedDryFoodEntries(sortedEntries);    \n  } catch (err) {\n      const foodError = foodErrorHandler(err);\n      setError(foodError.message);\n      console.error('Failed to fetch finished dry food entries:', err);\n    }\n  }, [petId]);\n\n  // Fetch both on mount\n  useEffect(() => {\n    console.log('ðŸ”´ DRY useEffect TRIGGERED for petId:', petId);\n\n    // Reset state immediately when petId changes to prevent stale data\n    setActiveDryFoodEntries([]);\n    setFinishedDryFoodEntries([]);\n    setError(null);\n\n    const fetchAllData = async () => {\n      console.log('ðŸ”´ DRY FETCHING DATA for petId:', petId);\n\n      setIsLoading(true);\n      await Promise.all([\n        fetchActiveDryFoodEntries(),\n        fetchFinishedDryFoodEntries()\n      ]);\n      console.log('ðŸ”´ DRY FETCH COMPLETE for petId:', petId, 'Active entries:', activeDryFoodEntries.length);\n\n      setIsLoading(false);\n    };\n\n    fetchAllData();\n  }, [fetchActiveDryFoodEntries, fetchFinishedDryFoodEntries]);\n\n  const createDryFoodEntry = useCallback(async (foodData: DryFoodFormData): Promise<DryFoodEntry | null> => {\n    try {\n      const newEntry = await dryFoodApi.createDryFoodEntry(petId, foodData);\n      \n      // Optimistically add to active entries\n      setActiveDryFoodEntries(prev => [newEntry, ...prev]);\n\n      toastService.success('Dry food entry added successfully');\n      return newEntry;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to create dry food entry:', err);\n      return null;\n    }\n  }, [petId]);\n\n  const updateDryFoodEntry = useCallback(async (\n    foodId: string, \n    foodData: Partial<DryFoodFormData>\n  ): Promise<DryFoodEntry | null> => {\n    try {\n      const updatedEntry = await dryFoodApi.updateDryFoodEntry(petId, foodId, foodData);\n      \n      // Optimistically update in active entries\n      setActiveDryFoodEntries(prev => \n        prev.map(entry => entry.id === foodId ? { ...updatedEntry } as DryFoodEntry : entry)\n      );\n      \n      toastService.success('Dry food entry updated successfully');\n      return updatedEntry as DryFoodEntry;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to update dry food entry:', err);\n      return null;\n    }\n  }, [petId]);\n\n  const deleteDryFoodEntry = useCallback(async (foodId: string): Promise<boolean> => {\n    try {\n      await foodApi.deleteFoodEntry(petId, foodId);\n      \n      // Remove from whichever state has it\n      setActiveDryFoodEntries(prev => prev.filter(entry => entry.id !== foodId));\n      setFinishedDryFoodEntries(prev => prev.filter(entry => entry.id !== foodId));\n      \n      toastService.success('Dry food entry deleted successfully');\n      return true;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to delete dry food entry:', err);\n      return false;\n    }\n  }, [petId]);\n\n  const markDryFoodAsFinished = useCallback(async (foodId: string): Promise<boolean> => {\n    try {\n      const finishedEntry = await foodApi.markFoodAsFinished(petId, foodId);\n      \n      // Move from active to finished\n      setActiveDryFoodEntries(prev => prev.filter(entry => entry.id !== foodId));\n      setFinishedDryFoodEntries(prev => [finishedEntry as DryFoodEntry, ...prev]);\n      \n      // Enhanced toast with consumption info\n      if (finishedEntry.actualDaysElapsed && finishedEntry.feedingStatus) {\n        const dryEntry = finishedEntry as DryFoodEntry;\n        const totalWeightGrams = parseFloat(dryEntry.bagWeight) * (dryEntry.bagWeightUnit === 'kg' ? 1000 : 453.592);\n        const dailyAmountGrams = parseFloat(dryEntry.dailyAmount);\n        const expectedDays = Math.ceil(totalWeightGrams / dailyAmountGrams);\n        \n        const statusLabel = \n          finishedEntry.feedingStatus === 'overfeeding' ? 'Overfeeding' :\n          finishedEntry.feedingStatus === 'slightly-over' ? 'Slightly Over' :\n          finishedEntry.feedingStatus === 'underfeeding' ? 'Underfeeding' :\n          finishedEntry.feedingStatus === 'slightly-under' ? 'Slightly Under' :\n          'Normal feeding';\n        \n        toastService.success(\n          `âœ… Finished! Consumed in ${finishedEntry.actualDaysElapsed} days (expected ${expectedDays} days). Status: ${statusLabel}`\n        );\n      } else {\n        toastService.success('Dry food marked as finished');\n      }\n      \n      return true;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to mark dry food as finished:', err);\n      return false;\n    }\n  }, [petId]);\n\n  const updateFinishDate = useCallback(async (foodId: string, dateFinished: string): Promise<DryFoodEntry | null> => {\n    try {\n      const updatedEntry = await foodApi.updateFinishDate(petId, foodId, dateFinished);\n      \n      // Update in finished entries and maintain sort order\n      setFinishedDryFoodEntries(prev => {\n        const updated = prev.map(entry => \n          entry.id === foodId ? { ...updatedEntry } as DryFoodEntry : entry\n        );\n        // Re-sort by dateFinished DESC after update\n        return updated.sort((a, b) => {\n          if (!a.dateFinished || !b.dateFinished) return 0;\n          return new Date(b.dateFinished).getTime() - new Date(a.dateFinished).getTime();\n        });\n      });\n      \n      // Enhanced toast with consumption info\n      if (updatedEntry.actualDaysElapsed && updatedEntry.feedingStatus) {\n        const dryEntry = updatedEntry as DryFoodEntry;\n        const totalWeightGrams = parseFloat(dryEntry.bagWeight) * (dryEntry.bagWeightUnit === 'kg' ? 1000 : 453.592);\n        const dailyAmountGrams = parseFloat(dryEntry.dailyAmount);\n        const expectedDays = Math.ceil(totalWeightGrams / dailyAmountGrams);\n        \n        const statusLabel = \n          updatedEntry.feedingStatus === 'overfeeding' ? 'Overfeeding' :\n          updatedEntry.feedingStatus === 'slightly-over' ? 'Slightly Over' :\n          updatedEntry.feedingStatus === 'underfeeding' ? 'Underfeeding' :\n          updatedEntry.feedingStatus === 'slightly-under' ? 'Slightly Under' :\n          'Normal feeding';\n        \n        toastService.success(\n          `âœ… Finished! Consumed in ${updatedEntry.actualDaysElapsed} days (expected ${expectedDays} days). Status: ${statusLabel}`\n        );\n      } else {\n        toastService.success('Finish date updated successfully');\n      }\n      \n      return updatedEntry as DryFoodEntry;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to update finish date:', err);\n      return null;\n    }\n  }, [petId]);\n\n  // Calculate low stock from active entries\n  const lowStockDryFoodEntries = activeDryFoodEntries.filter(\n    entry => entry.remainingDays !== undefined && entry.remainingDays <= 7 && entry.remainingDays > 0\n  );\n\n  return {\n    activeDryFoodEntries,\n    finishedDryFoodEntries,\n    lowStockDryFoodEntries,\n    isLoading,\n    error,\n    createDryFoodEntry,\n    updateDryFoodEntry,\n    deleteDryFoodEntry,\n    markDryFoodAsFinished,\n    updateFinishDate,\n    refetchDryFoodEntries: async () => {\n      await Promise.all([\n        fetchActiveDryFoodEntries(),\n        fetchFinishedDryFoodEntries()\n      ]);\n    },\n  };\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2352, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/hooks/useWetFoodTracker.ts"],"sourcesContent":["import { useState, useEffect, useCallback } from 'react';\nimport { wetFoodApi, foodApi, foodErrorHandler } from '@/lib/api/domains/food';\nimport type { WetFoodEntry, WetFoodFormData } from '@/types/food';\nimport { toastService } from '@/lib/toast';\n\ninterface UseWetFoodTrackerOptions {\n  petId: string;\n}\n\nexport function useWetFoodTracker({ petId }: UseWetFoodTrackerOptions) {\n  console.log('ðŸ”µ useWetFoodTracker HOOK CALLED with petId:', petId);\n\n  // Separate state for active and finished entries\n  const [activeWetFoodEntries, setActiveWetFoodEntries] = useState<WetFoodEntry[]>([]);\n  const [finishedWetFoodEntries, setFinishedWetFoodEntries] = useState<WetFoodEntry[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fetch active entries\n  const fetchActiveWetFoodEntries = useCallback(async () => {\n    if (!petId) return;\n    \n    try {\n      setError(null);\n      const response = await wetFoodApi.getWetFoodEntries(petId);\n      setActiveWetFoodEntries(response.foodEntries);\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      setError(foodError.message);\n      console.error('Failed to fetch active wet food entries:', err);\n    }\n  }, [petId]);\n\n  // Fetch finished entries\n  const fetchFinishedWetFoodEntries = useCallback(async () => {\n    if (!petId) return;\n    \n    try {\n      setError(null);\n      const response = await wetFoodApi.getFinishedWetFoodEntries(petId);\n      // Sort by dateFinished DESC (most recent first)\n      const sortedEntries = [...response.foodEntries].sort((a, b) => {\n        if (!a.dateFinished || !b.dateFinished) return 0;\n        return new Date(b.dateFinished).getTime() - new Date(a.dateFinished).getTime();\n      });\n      setFinishedWetFoodEntries(sortedEntries);\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      setError(foodError.message);\n      console.error('Failed to fetch finished wet food entries:', err);\n    }\n  }, [petId]);\n\n  // Fetch both on mount\n  useEffect(() => {\n    console.log('ðŸ”µ WET useEffect TRIGGERED for petId:', petId);\n\n    // Reset state immediately when petId changes to prevent stale data\n    setActiveWetFoodEntries([]);\n    setFinishedWetFoodEntries([]);\n    setError(null);\n\n    const fetchAllData = async () => {\n      console.log('ðŸ”µ WET FETCHING DATA for petId:', petId);\n\n      setIsLoading(true);\n      await Promise.all([\n        fetchActiveWetFoodEntries(),\n        fetchFinishedWetFoodEntries()\n      ]);\n      console.log('ðŸ”µ WET FETCH COMPLETE for petId:', petId, 'Active entries:', activeWetFoodEntries.length);\n\n      setIsLoading(false);\n    };\n\n    fetchAllData();\n  }, [fetchActiveWetFoodEntries, fetchFinishedWetFoodEntries]);\n\n  const createWetFoodEntry = useCallback(async (foodData: WetFoodFormData): Promise<WetFoodEntry | null> => {\n    try {\n      const newEntry = await wetFoodApi.createWetFoodEntry(petId, foodData);\n      \n      // Optimistically add to active entries\n      setActiveWetFoodEntries(prev => [newEntry, ...prev]);\n\n      toastService.success('Wet food entry added successfully');\n      return newEntry;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to create wet food entry:', err);\n      return null;\n    }\n  }, [petId]);\n\n  const updateWetFoodEntry = useCallback(async (\n    foodId: string, \n    foodData: Partial<WetFoodFormData>\n  ): Promise<WetFoodEntry | null> => {\n    try {\n      const updatedEntry = await wetFoodApi.updateWetFoodEntry(petId, foodId, foodData);\n      \n      // Optimistically update in active entries\n      setActiveWetFoodEntries(prev => \n        prev.map(entry => entry.id === foodId ? { ...updatedEntry } as WetFoodEntry : entry)\n      );\n      \n      toastService.success('Wet food entry updated successfully');\n      return updatedEntry as WetFoodEntry;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to update wet food entry:', err);\n      return null;\n    }\n  }, [petId]);\n\n  const deleteWetFoodEntry = useCallback(async (foodId: string): Promise<boolean> => {\n    try {\n      await foodApi.deleteFoodEntry(petId, foodId);\n      \n      // Remove from whichever state has it\n      setActiveWetFoodEntries(prev => prev.filter(entry => entry.id !== foodId));\n      setFinishedWetFoodEntries(prev => prev.filter(entry => entry.id !== foodId));\n      \n      toastService.success('Wet food entry deleted successfully');\n      return true;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to delete wet food entry:', err);\n      return false;\n    }\n  }, [petId]);\n\n  const markWetFoodAsFinished = useCallback(async (foodId: string): Promise<boolean> => {\n    try {\n      const finishedEntry = await foodApi.markFoodAsFinished(petId, foodId);\n      \n      // Move from active to finished\n      setActiveWetFoodEntries(prev => prev.filter(entry => entry.id !== foodId));\n      setFinishedWetFoodEntries(prev => [finishedEntry as WetFoodEntry, ...prev]);\n      \n      // Enhanced toast with consumption info\n      if (finishedEntry.actualDaysElapsed && finishedEntry.feedingStatus) {\n        const wetEntry = finishedEntry as WetFoodEntry;\n        const totalWeightGrams = wetEntry.numberOfUnits * parseFloat(wetEntry.weightPerUnit) * (wetEntry.wetWeightUnit === 'oz' ? 28.3495 : 1);\n        const dailyAmountGrams = parseFloat(wetEntry.dailyAmount) * (wetEntry.wetDailyAmountUnit === 'oz' ? 28.3495 : 1);\n        const expectedDays = Math.ceil(totalWeightGrams / dailyAmountGrams);\n        \n        const statusLabel = \n          finishedEntry.feedingStatus === 'overfeeding' ? 'Overfeeding' :\n          finishedEntry.feedingStatus === 'slightly-over' ? 'Slightly Over' :\n          finishedEntry.feedingStatus === 'underfeeding' ? 'Underfeeding' :\n          finishedEntry.feedingStatus === 'slightly-under' ? 'Slightly Under' :\n          'Normal feeding';\n        \n        toastService.success(\n          `âœ… Finished! Consumed in ${finishedEntry.actualDaysElapsed} days (expected ${expectedDays} days). Status: ${statusLabel}`\n        );\n      } else {\n        toastService.success('Wet food marked as finished');\n      }\n      \n      return true;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to mark wet food as finished:', err);\n      return false;\n    }\n  }, [petId]);\n\n  const updateFinishDate = useCallback(async (foodId: string, dateFinished: string): Promise<WetFoodEntry | null> => {\n    try {\n      const updatedEntry = await foodApi.updateFinishDate(petId, foodId, dateFinished);\n      \n      // Update in finished entries and maintain sort order\n      setFinishedWetFoodEntries(prev => {\n        const updated = prev.map(entry => \n          entry.id === foodId ? { ...updatedEntry } as WetFoodEntry : entry\n        );\n        // Re-sort by dateFinished DESC after update\n        return updated.sort((a, b) => {\n          if (!a.dateFinished || !b.dateFinished) return 0;\n          return new Date(b.dateFinished).getTime() - new Date(a.dateFinished).getTime();\n        });\n      });\n      \n      // Enhanced toast with consumption info\n      if (updatedEntry.actualDaysElapsed && updatedEntry.feedingStatus) {\n        const wetEntry = updatedEntry as WetFoodEntry;\n        const totalWeightGrams = wetEntry.numberOfUnits * parseFloat(wetEntry.weightPerUnit) * (wetEntry.wetWeightUnit === 'oz' ? 28.3495 : 1);\n        const dailyAmountGrams = parseFloat(wetEntry.dailyAmount) * (wetEntry.wetDailyAmountUnit === 'oz' ? 28.3495 : 1);\n        const expectedDays = Math.ceil(totalWeightGrams / dailyAmountGrams);\n        \n        const statusLabel = \n          updatedEntry.feedingStatus === 'overfeeding' ? 'Overfeeding' :\n          updatedEntry.feedingStatus === 'slightly-over' ? 'Slightly Over' :\n          updatedEntry.feedingStatus === 'underfeeding' ? 'Underfeeding' :\n          updatedEntry.feedingStatus === 'slightly-under' ? 'Slightly Under' :\n          'Normal feeding';\n        \n        toastService.success(\n          `âœ… Finished! Consumed in ${updatedEntry.actualDaysElapsed} days (expected ${expectedDays} days). Status: ${statusLabel}`\n        );\n      } else {\n        toastService.success('Finish date updated successfully');\n      }\n      \n      return updatedEntry as WetFoodEntry;\n    } catch (err) {\n      const foodError = foodErrorHandler(err);\n      toastService.error(foodError.message);\n      console.error('Failed to update finish date:', err);\n      return null;\n    }\n  }, [petId]);\n\n  // Calculate low stock from active entries\n  const lowStockWetFoodEntries = activeWetFoodEntries.filter(\n    entry => entry.remainingDays !== undefined && entry.remainingDays <= 7 && entry.remainingDays > 0\n  );\n\n  return {\n    activeWetFoodEntries,\n    finishedWetFoodEntries,\n    lowStockWetFoodEntries,\n    isLoading,\n    error,\n    createWetFoodEntry,\n    updateWetFoodEntry,\n    deleteWetFoodEntry,\n    markWetFoodAsFinished,\n    updateFinishDate,\n    refetchWetFoodEntries: async () => {\n      await Promise.all([\n        fetchActiveWetFoodEntries(),\n        fetchFinishedWetFoodEntries()\n      ]);\n    },\n  };\n}"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2575, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/types/food.ts"],"sourcesContent":["export type FoodType = 'dry' | 'wet';\n\n// Separate, clean types\nexport type DryFoodEntry = {\n  id: string;\n  petId: string;\n  foodType: 'dry';\n  brandName: string | null;\n  productName: string | null;\n  bagWeight: string;\n  bagWeightUnit: 'kg' | 'pounds';\n  dailyAmount: string;\n  dryDailyAmountUnit: 'grams';\n  dateStarted: string;\n  dateFinished: string | null;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n  \n  // Wet food fields (null for dry)\n  numberOfUnits: null;\n  weightPerUnit: null;\n  wetWeightUnit: null;\n  wetDailyAmountUnit: null;\n  \n  // Calculated fields for active entries\n  remainingDays?: number;\n  remainingWeight?: number;\n  depletionDate?: string;  // String from API\n  \n  // Calculated fields for finished entries\n  actualDaysElapsed?: number;\n  actualDailyConsumption?: number;\n  expectedDailyConsumption?: number;\n  variancePercentage?: number;\n  feedingStatus?: 'overfeeding' | 'slightly-over' | 'normal' | 'slightly-under' | 'underfeeding';\n};\n\nexport type WetFoodEntry = {\n  id: string;\n  petId: string;\n  foodType: 'wet';\n  brandName: string | null;\n  productName: string | null;\n  numberOfUnits: number;\n  weightPerUnit: string;\n  wetWeightUnit: 'grams' | 'oz';\n  dailyAmount: string;\n  wetDailyAmountUnit: 'grams' | 'oz';\n  dateStarted: string;\n  dateFinished: string | null;\n  isActive: boolean;\n  createdAt: string;\n  updatedAt: string;\n  \n  // Dry food fields (null for wet)\n  bagWeight: null;\n  bagWeightUnit: null;\n  dryDailyAmountUnit: null;\n  \n  // Calculated fields for active entries\n  remainingDays?: number;\n  remainingWeight?: number;\n  depletionDate?: string;\n  \n  // Calculated fields for finished entries\n  actualDaysElapsed?: number;\n  actualDailyConsumption?: number;\n  expectedDailyConsumption?: number;\n  variancePercentage?: number;\n  feedingStatus?: 'overfeeding' | 'slightly-over' | 'normal' | 'slightly-under' | 'underfeeding';\n};\n\nexport type DryFoodFormData = {\n  brandName?: string;\n  productName?: string;\n  bagWeight: string;\n  bagWeightUnit: 'kg' | 'pounds';\n  dailyAmount: string;\n  dryDailyAmountUnit: 'grams';\n  dateStarted: string;\n};\n\nexport type WetFoodFormData = {\n  brandName?: string;\n  productName?: string;\n  numberOfUnits: string; // String for form input\n  weightPerUnit: string;\n  wetWeightUnit: 'grams' | 'oz';\n  dailyAmount: string;\n  wetDailyAmountUnit: 'grams' | 'oz';\n  dateStarted: string;\n};\n\n// API response types\nexport type DryFoodEntriesApiResponse = {\n  foodEntries: DryFoodEntry[];\n  total: number;\n};\n\nexport type WetFoodEntriesApiResponse = {\n  foodEntries: WetFoodEntry[];\n  total: number;\n};\n\nexport type AllFoodEntriesApiResponse = {\n  foodEntries: (DryFoodEntry | WetFoodEntry)[];\n  total: number;\n};\n\n// Unit labels\nexport const DRY_FOOD_BAG_UNITS = ['kg', 'pounds'] as const;\nexport const DRY_FOOD_DAILY_UNITS = ['grams'] as const;\nexport const WET_FOOD_UNITS = ['grams', 'oz'] as const;"],"names":[],"mappings":";;;;;AA+GO,MAAM,qBAAqB;IAAC;IAAM;CAAS;AAC3C,MAAM,uBAAuB;IAAC;CAAQ;AACtC,MAAM,iBAAiB;IAAC;IAAS;CAAK","debugId":null}},
    {"offset": {"line": 2597, "column": 0}, "map": {"version":3,"sources":["file:///Users/thomas-macbook/dev/mypet-app/apps/web/src/app/pets/page.tsx"],"sourcesContent":["'use client';\n\nimport { useSessionContext } from '@/contexts/SessionContext';\nimport { useUserSession } from '@/hooks/useUserSession';\nimport PetList from '@/components/pets/PetList';\nimport { PetListSkeleton } from '@/components/ui/skeletons/PetSkeleton';\nimport { Alert, AlertDescription } from '@/components/ui/alert';\nimport { AlertCircle } from 'lucide-react';\n\nexport default function PetsPage() {\n  const { user, isLoading: isLoadingUser, error: sessionError } = useSessionContext();\n\n\n  // Loading state\n  if (isLoadingUser) {\n    return <PetListSkeleton />;\n  }\n\n  // Error state (not needed - middleware protects the route)\n  if (sessionError) {\n    return (\n      <div className=\"container mx-auto py-8 px-4\">\n        <Alert variant=\"destructive\">\n          <AlertCircle className=\"h-4 w-4\" />\n          <AlertDescription>\n            Failed to load your session. Please try refreshing the page.\n          </AlertDescription>\n        </Alert>\n      </div>\n    );\n  }\n\n  // Middleware ensures user exists, but safety check\n  if (!user) return null;\n\n  return <PetList />;\n}"],"names":[],"mappings":";;;;AAEA;AAEA;AACA;AACA;AACA;AAPA;;;;;;;AASe,SAAS;IACtB,MAAM,EAAE,IAAI,EAAE,WAAW,aAAa,EAAE,OAAO,YAAY,EAAE,GAAG,CAAA,GAAA,iJAAA,CAAA,oBAAiB,AAAD;IAGhF,gBAAgB;IAChB,IAAI,eAAe;QACjB,qBAAO,8OAAC,mKAAA,CAAA,kBAAe;;;;;IACzB;IAEA,2DAA2D;IAC3D,IAAI,cAAc;QAChB,qBACE,8OAAC;YAAI,WAAU;sBACb,cAAA,8OAAC,gJAAA,CAAA,QAAK;gBAAC,SAAQ;;kCACb,8OAAC,oNAAA,CAAA,cAAW;wBAAC,WAAU;;;;;;kCACvB,8OAAC,gJAAA,CAAA,mBAAgB;kCAAC;;;;;;;;;;;;;;;;;IAM1B;IAEA,mDAAmD;IACnD,IAAI,CAAC,MAAM,OAAO;IAElB,qBAAO,8OAAC,oJAAA,CAAA,UAAO;;;;;AACjB","debugId":null}}]
}